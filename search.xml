<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>VHDL第五章状态机的设计</title>
      <link href="/2023/02/16/VHDL%E7%AC%AC%E4%BA%94%E7%AB%A0%E7%8A%B6%E6%80%81%E6%9C%BA%E7%9A%84%E8%AE%BE%E8%AE%A1/"/>
      <url>/2023/02/16/VHDL%E7%AC%AC%E4%BA%94%E7%AB%A0%E7%8A%B6%E6%80%81%E6%9C%BA%E7%9A%84%E8%AE%BE%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302151643936.png"                      alt="image.png"                ><br>时序电路 &#x3D; 组合逻辑+存储电路</p><h1 id="三位计数器"><a href="#三位计数器" class="headerlink" title="三位计数器"></a>三位计数器</h1><p>从000到111，循环往复<br>以上升沿触发的D触发器作为状态寄存器<br>次态和现态的真值表<br><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302151649863.png"                      alt="image.png"                ></p><p>又因为计数器需要使用到3个状态寄存器（即是3个状态寄存器）<br>通过卡诺图的推导（次态方程出错）<br><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302152047281.png"                      alt="image.png"                ><br>根据次态方程画出详细的电路</p><h1 id="时序电路与状态机"><a href="#时序电路与状态机" class="headerlink" title="时序电路与状态机"></a>时序电路与状态机</h1><ul><li><p>状态机的本质</p><blockquote><p>具有逻辑顺序或时序规律事件的一种描述方法。具有逻辑顺序和时序规律的事件都适合用状态机描述<br>同步时序逻辑电路符合状态机的一般特征。 便可以使用状态机来描述</p></blockquote></li><li><p>三个基本要素：</p></li></ul><ol><li><strong>状态</strong>  ：状态变量</li><li><strong>输出</strong>：某一个状态时特定发生的事件</li><li><strong>输入</strong>： 进入状态的条件</li></ol><h1 id="电路的竞争与冒险"><a href="#电路的竞争与冒险" class="headerlink" title="电路的竞争与冒险"></a>电路的竞争与冒险</h1><p>竞争：多径信号汇合在一路，时间上有先有后。（<strong>殊途同归</strong>）<br>冒险： 因为竞争导致电路输出错误的现象。</p><p>组合逻辑电路存在该问题，所以时序逻辑电路也一样面临着这个问题<br>使用<strong>同步时序逻辑电路</strong>可以克服次态逻辑的上述问题</p><p>课本上消除竞争与冒险的方法：</p><ol><li>考虑接入滤波电容 （简单但影响输出）</li><li>修改逻辑设计（电路往往十分复杂）</li><li>引入脉冲（对信号的时钟周期有所限制）</li></ol><h2 id="时钟周期的选取"><a href="#时钟周期的选取" class="headerlink" title="时钟周期的选取"></a>时钟周期的选取</h2><p>在时序电路中，存在 3个重要的时序参数<br>$$建立时间t_{su}、保持时间t_{hold}、传播时延t_{c-q}$$</p><p>$t_{su}$ 建立时间： 触发器的时钟信号上升沿到达之前，数据稳定的时间<br>$t_{hold}$ 数据输入触发器所需的时间<br>$t_{c-q}$ 信号传播路径上传播所需要的时间</p><p>在同步时序电路中，假设电路其中一级最长的延时为$t_{plogic}$<br>综上所述：<br>$$时钟周期T 应该满足————T&gt; t_{su}+t_{c-q} + t_{plogic}$$<br>#值得一看 </p><h1 id="有限状态机的描述方法"><a href="#有限状态机的描述方法" class="headerlink" title="有限状态机的描述方法"></a>有限状态机的描述方法</h1><p><strong>ASM图</strong>（Algorithmic State Machine）其中蕴含着<strong>时序</strong>的关系，类似流程图。</p><h2 id="ASM图的组成部分"><a href="#ASM图的组成部分" class="headerlink" title="ASM图的组成部分"></a>ASM图的组成部分</h2><ul><li><p>状态框：<br> 使用矩形框来表示状态  ， <strong>状态名</strong>写在左上角，<strong>二进制</strong>编码写在右上角 ，<strong>操作内容</strong>写在方框内，该状态经历的时间至少为一个时钟周期。<br> <img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302152118633.png"                      alt="image.png"                ></p></li><li><p>判断框</p><blockquote><p>棱形框表示   内部是条件，分支需要写明相应条件<br><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302152122167.png"                      alt="image.png"                ></p></blockquote></li><li><p>条件框：</p><blockquote><p>椭圆框表示  条件框必定与 判断框相连<br>仅当判断框中<strong>判断变量满足相应的转移条件</strong>时，才进行条件框中标明的操作和信号输出</p></blockquote></li></ul><p>跟状态框有相似 但也有很大差别</p><blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302152120410.png"                      alt="image.png"                ></p></blockquote><ul><li>状态单元</li></ul><blockquote><p>单个条件框 或者状态框组成<br><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302152126015.png"                      alt="image.png"                ><br> 每一个状态单元表示一个时钟周期下 系统的状态</p></blockquote><h1 id="交通灯ASM图"><a href="#交通灯ASM图" class="headerlink" title="交通灯ASM图"></a>交通灯ASM图</h1><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302152132606.png"                      alt="image.png"                >解答：<br><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302152133716.png"                      alt="image.png"                ></p><h1 id="有限状态机的分类"><a href="#有限状态机的分类" class="headerlink" title="有限状态机的分类"></a>有限状态机的分类</h1><p><strong>信号输出</strong> ： Mealy  （与当前状态有关，还与外部输入有关，<strong>首尾相连</strong>） Moore（仅与当前状态有关）<br><strong>结构</strong>： 单进程 双进程 三进程<br><strong>表达方式</strong>：符号化 状态机、确定状态编码状态机（顺序编码、onehot编码 格雷码状态机）</p><p>使用的判断条件: </p><ul><li><strong>Moore</strong>型的输出与当前的输入部分无关，所以当前输出产生的人和效果将会延迟到下一个时钟周期</li><li>最大优点：将输入部分和输出部分隔离</li></ul><p>Mealy 型，输出是输入的函数，所以当输入信号改变时，输出将在一个时钟周期内发生改变</p><p><strong>单进程描述</strong>：<br>它就是将状态机的三个逻辑单元（<em>状态寄存器、下状态产生逻辑、输出逻辑</em>）合并起来，采用一个进程描述</p><hr><h2 id="单进程状态机"><a href="#单进程状态机" class="headerlink" title="单进程状态机"></a>单进程状态机</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302161050267.png"                      alt="image.png"                ></p><p>还是以交通灯为例</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LIBRARY</span> IEEE ;</span><br><span class="line"><span class="keyword">USE</span> IEEE.STD_LOGIC_1164.<span class="keyword">ALL</span> ;</span><br><span class="line"><span class="keyword">ENTITY</span>  traffic  <span class="keyword">IS</span></span><br><span class="line">     <span class="keyword">PORT</span>( clock , timed , car : <span class="keyword">IN</span> <span class="built_in">std_ulogic</span> ;</span><br><span class="line"> start_timer, major_green, minor_green : <span class="keyword">OUT</span> <span class="built_in">std_ulogic</span> );</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">ENTITY</span> traffic ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">ARCHITECTURE</span> asm1 <span class="keyword">OF</span> traffic <span class="keyword">IS</span> </span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">PROCESS</span> （clock, timed, car)</span><br><span class="line">        <span class="keyword">TYPE</span> state_type <span class="keyword">IS</span> (G, R);    <span class="comment">--这里采用符号化状态机的描述方式</span></span><br><span class="line">        <span class="keyword">VARIABLE</span> state: state_type; <span class="comment">--将状态定义为变量类型</span></span><br><span class="line">    <span class="keyword">BEGIN</span></span><br><span class="line">        <span class="keyword">IF</span> (rising_edge(clock)) <span class="keyword">THEN</span></span><br><span class="line">            <span class="keyword">CASE</span> state <span class="keyword">IS</span></span><br><span class="line">                <span class="keyword">WHEN</span> G =&gt;</span><br><span class="line">                    major_green &lt;= ‘<span class="number">1</span>’;</span><br><span class="line">                    minor_green &lt;= ‘<span class="number">0</span>’;</span><br><span class="line">                <span class="keyword">IF</span> (car = ‘<span class="number">1</span>’) <span class="keyword">THEN</span></span><br><span class="line">        start_timer &lt;= ‘ <span class="number">1</span>’;</span><br><span class="line">        state := R;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">     <span class="keyword">WHEN</span> R =&gt;</span><br><span class="line">    major_green &lt;= ‘<span class="number">0</span>’;</span><br><span class="line">minor_green &lt;= ‘<span class="number">1</span>’;</span><br><span class="line"><span class="keyword">IF</span> (timed= ‘<span class="number">1</span>’) <span class="keyword">THEN</span></span><br><span class="line">    start_timer &lt;= ‘ <span class="number">1</span>’;</span><br><span class="line">        state := G;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">IF</span></span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">PROCESS</span>;</span><br><span class="line"><span class="keyword">END</span> ARCHITETURE;</span><br></pre></td></tr></table></figure></div><ul><li>单进程状态变量可以定义为<strong>变量</strong>类型，放在进程的说明部分</li><li>进程开头有时钟有效边沿的检测语句</li><li>注意在这里进程敏感参数表中的car和timed可省去<br>rising_edge(clock)也可以写成clock’event and clock&#x3D;‘1’</li><li>if条件涵盖不完整的if语句会产生<strong>寄存器</strong></li><li>有时候会引入不必要的寄存器–&gt; 如果将描述<strong>时序</strong>的部分放在具有边沿检测条件的<strong>if语句或wait语句的进程</strong>中，而将描述<strong>组合电路的语句放在普通的进程</strong>中，这样可以有效控制寄存器的引入。**(双进程，一个负责时序，一个负责组合逻辑电路**)</li></ul><h2 id="双进程状态机"><a href="#双进程状态机" class="headerlink" title="双进程状态机"></a>双进程状态机</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302161051214.png"                      alt="image.png"                ></p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LIBRARY</span> IEEE ;</span><br><span class="line"><span class="keyword">USE</span> IEEE.STD_LOGIC_1164.<span class="keyword">ALL</span> ;</span><br><span class="line"><span class="keyword">ENTITY</span>  traffic  <span class="keyword">IS</span></span><br><span class="line">     <span class="keyword">PORT</span>( clock , timed , car : <span class="keyword">IN</span> <span class="built_in">std_ulogic</span> ;</span><br><span class="line">    start_timer, major_green, minor_green : <span class="keyword">OUT</span> <span class="built_in">std_ulogic</span> );</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">ENTITY</span> traffic ;</span><br><span class="line"><span class="keyword">ARCHITECTURE</span> asm2 <span class="keyword">OF</span> traffic <span class="keyword">IS</span></span><br><span class="line"><span class="keyword">TYPE</span> state_type <span class="keyword">IS</span> (G, R);   <span class="comment">--利用枚举类型定义状态</span></span><br><span class="line"><span class="keyword">SIGNAL</span> pr_state, nx_state : state_type; </span><br><span class="line">       <span class="comment">--将状态机的现态、次态定义为全局信号，便于在进程间传递信息</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">seq: <span class="keyword">PROCESS</span> (clock)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">IF</span>(rising_edge(clock)) <span class="keyword">THEN</span></span><br><span class="line">        pr_state &lt;= nx_state;<span class="comment">--次态是寄存器的输入</span></span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">IF</span>;               <span class="comment">--条件涵盖不完整的if语句产生状态寄存器</span></span><br><span class="line"><span class="keyword">END</span> <span class="keyword">PROCESS</span> seq; <span class="comment">--产生状态寄存器的进程</span></span><br><span class="line">com: <span class="keyword">PROCESS</span> (pr_state, car, timed)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    start_timer &lt;= ‘<span class="number">0</span>’;</span><br><span class="line">    <span class="keyword">CASE</span> pr_state <span class="keyword">IS</span></span><br><span class="line">        <span class="keyword">WHEN</span> G =&gt;</span><br><span class="line">        major_green &lt;= ‘<span class="number">1</span>’;</span><br><span class="line"> minor_green &lt;= ‘<span class="number">0</span>’;</span><br><span class="line"><span class="keyword">IF</span> (car = ‘<span class="number">1</span>’) <span class="keyword">THEN</span></span><br><span class="line">     start_timer &lt;= ‘<span class="number">1</span>’;</span><br><span class="line">     nx_state &lt;= R;</span><br><span class="line"><span class="keyword">ELSE</span></span><br><span class="line">     nx_state &lt;= G;</span><br><span class="line"> <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"> <span class="keyword">WHEN</span> R =&gt;</span><br><span class="line">        major_green &lt;= ‘<span class="number">0</span>’;</span><br><span class="line"> minor_green &lt;= ‘<span class="number">1</span>’;</span><br><span class="line">     <span class="keyword">IF</span> (timed= ‘<span class="number">1</span>’) <span class="keyword">THEN</span></span><br><span class="line">         nx_state &lt;= G;</span><br><span class="line">     <span class="keyword">ELSE</span></span><br><span class="line">         nx_state &lt;= R;</span><br><span class="line">     <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"> <span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">PROCESS</span> com;</span><br><span class="line"><span class="comment">--**产生次态和输出逻辑的进程**</span></span><br><span class="line"><span class="keyword">END</span> asm2;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><ul><li>双进程中状态变量要定义为<strong>SIGNAL</strong>类型，用于进程间信息的传递</li><li>可以在产生寄存器的进程中加上异步复位语句，用于确定初始状态:    &#96;IF reset&#x3D;‘1’ THEN pr_state &lt;&#x3D; G;&#96;&#96;</li><li>注意在组合进程中if语句要写完整if-else</li></ul><h2 id="三进程状态机"><a href="#三进程状态机" class="headerlink" title="三进程状态机"></a>三进程状态机</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302161115656.png"                      alt="image.png"                ></p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LIBRARY</span> IEEE ;</span><br><span class="line"><span class="keyword">USE</span> IEEE.STD_LOGIC_1164.<span class="keyword">ALL</span> ;</span><br><span class="line"><span class="keyword">ENTITY</span>  traffic  <span class="keyword">IS</span></span><br><span class="line">     <span class="keyword">PORT</span>( clock , timed , car : <span class="keyword">IN</span> <span class="built_in">std_ulogic</span> ;</span><br><span class="line">    start_timer, major_green, minor_green : <span class="keyword">OUT</span> <span class="built_in">std_ulogic</span> );</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">ENTITY</span> traffic ;</span><br><span class="line"><span class="keyword">ARCHITECTURE</span> asm2 <span class="keyword">OF</span> traffic <span class="keyword">IS</span></span><br><span class="line"><span class="keyword">TYPE</span> state_type <span class="keyword">IS</span> (G, R); <span class="comment">--利用枚举类型定义状态</span></span><br><span class="line"><span class="keyword">SIGNAL</span> pr_state, next_state : state_type; </span><br><span class="line">       <span class="comment">--将状态机的现态、次态定义为全局信号，便于在进程间传递信息</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">seq: <span class="keyword">PROCESS</span> (clock)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">IF</span>(rising_edge(clock)) <span class="keyword">THEN</span></span><br><span class="line">        pr_state &lt;= next_state;<span class="comment">--次态是寄存器的输入</span></span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">IF</span>;               <span class="comment">--条件涵盖不完整的if语句产生状态寄存器</span></span><br><span class="line"><span class="keyword">END</span> <span class="keyword">PROCESS</span> seq; <span class="comment">--产生状态寄存器的进程</span></span><br><span class="line">ns: <span class="keyword">PROCESS</span> (car, timed, pr_state)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">CASE</span> pr_state <span class="keyword">IS</span></span><br><span class="line"><span class="keyword">WHEN</span> G =&gt;</span><br><span class="line">    <span class="keyword">IF</span> (car = ‘<span class="number">1</span>’) <span class="keyword">THEN</span></span><br><span class="line">        nx_state &lt;= R;</span><br><span class="line">    <span class="keyword">ELSE</span></span><br><span class="line"> nx_state &lt;= G;</span><br><span class="line"> <span class="keyword">WHEN</span> R =&gt;</span><br><span class="line">    <span class="keyword">IF</span> (timed = ‘<span class="number">1</span>’) <span class="keyword">THEN</span></span><br><span class="line">        nx_state &lt;= G;</span><br><span class="line">    <span class="keyword">ELSE</span></span><br><span class="line"> nx_state &lt;= R;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">PROCESS</span> ns;</span><br><span class="line"> <span class="comment">--产生次态逻辑进程</span></span><br><span class="line"> op: <span class="keyword">PROCESS</span> (car, pr_state) <span class="comment">-- Mealy State Machine</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">start_timer &lt;= ‘<span class="number">0</span>’;</span><br><span class="line"><span class="keyword">IF</span> (pr_state = G) <span class="keyword">THEN</span></span><br><span class="line">    major_green &lt;= ‘<span class="number">1</span>’;</span><br><span class="line">    minor_green &lt;= ‘<span class="number">0</span>’;</span><br><span class="line">    <span class="keyword">IF</span> (car = ‘<span class="number">1</span>’) <span class="keyword">THEN</span></span><br><span class="line">        start_timer &lt;= ‘<span class="number">1</span>’;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"><span class="keyword">ELSE</span></span><br><span class="line">    major_green &lt;= ‘<span class="number">0</span>’;</span><br><span class="line">    minor_green &lt;= ‘<span class="number">1</span>’;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">PROCESS</span> op;</span><br><span class="line"><span class="comment">--产生输出逻辑的进程</span></span><br><span class="line"><span class="keyword">END</span> asm3；</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></div><h1 id="表达方式分类"><a href="#表达方式分类" class="headerlink" title="表达方式分类"></a>表达方式分类</h1><ul><li>符号化状态机<blockquote><p>在程序的说明部分使用<strong>TYPE语句定义枚举类型</strong>，其元素用状态机的状态名来定义。状态变量（如状态机的现态和次态）定义为变量或信号，并将状态变量的数据类型定义为含有既定状态元素的枚举类型。<br>多进程时：定义为信号，便于信息的传递。<br>（以上三种进程例子皆是符号化状态机）</p></blockquote></li></ul><p>类型定义语句：<br>TYPE 数据类型名 IS 数据类型定义 OF 基本数据类型;<br>TYPE 数据类型名 IS 数据类型定义;</p><ul><li>确定状态编码状态机<blockquote><p>二进制编码<br>格雷码编码<br>one-hot 编码</p></blockquote></li></ul><p>每一个状态都使用二进制位来编码<br>例：<br>实现4状态的状态机，其其二进制编码可为 状态1&#x3D;“00”状态2&#x3D;“01”状态3&#x3D;“10”状态4&#x3D;“11”<br>需要的寄存器数量最少，有n个寄存器就可以对$2^n$个状态进行编码</p><p>格雷码：每次仅有一位发生变化<br>特点：触发器使用较少，速度较慢，不会产生两位同时翻转的情况。当状态位的输出被异步应用时，格雷码编码是有益的。</p><p>One-hot 编码：<br>每个状态采用一个触发器进行记录<br>以四个状态为例<br>状态1 “0001”      状态2：”0010“  ….. “0100”.  “1000”;<br>特点： 触发器使用较多，逻辑简单、速度快</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302161423714.png"                      alt="image.png"                ><br>指明表达方式：</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ARCHITECTURE</span> BEHAV <span class="keyword">OF</span> BINARY <span class="keyword">IS</span></span><br><span class="line"><span class="keyword">TYPE</span> STATE_TYPE <span class="keyword">IS</span>(S1, S2, S3, S4, S5, S6, S7);</span><br><span class="line"><span class="keyword">ATTRIBUTE</span> ENUM_ENCODING: <span class="built_in">STRING</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">ATTRIBUTE</span> ENUM_ENCODING <span class="keyword">OF</span> STATE_TYPE: <span class="keyword">TYPE</span> <span class="keyword">IS</span> <span class="string">&quot;001 010 011 100 101 110 111&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 换成 one-hot 编码</span></span><br><span class="line"><span class="keyword">ATTRIBUTE</span> ENUM_ENCODING <span class="keyword">OF</span> STATE_TYPE: <span class="keyword">TYPE</span> </span><br><span class="line"><span class="keyword">IS</span> <span class="string">&quot;00000001 00000010 00000100 00001000 00010000 00100000 01000000 10000000&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></div><h1 id="状态机VHDL举例实现"><a href="#状态机VHDL举例实现" class="headerlink" title="状态机VHDL举例实现"></a>状态机VHDL举例实现</h1><h2 id="Mealy型状态机"><a href="#Mealy型状态机" class="headerlink" title="Mealy型状态机"></a>Mealy型状态机</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302161429301.png"                      alt="image.png"                ></p><p>对应的代码：</p><p><strong>输出端无同步</strong></p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LIBRARY</span> ieee;</span><br><span class="line"><span class="keyword">USE</span> ieee.std_logic_1164.<span class="keyword">all</span>;</span><br><span class="line"><span class="comment">-----------------------------------------------</span></span><br><span class="line"><span class="keyword">ENTITY</span> simple_fsm <span class="keyword">IS</span></span><br><span class="line"><span class="keyword">PORT</span> (a, b, d, clk, rst: <span class="keyword">IN</span> <span class="built_in">BIT</span>;</span><br><span class="line">      x: <span class="keyword">OUT</span> <span class="built_in">BIT</span>);</span><br><span class="line"><span class="keyword">END</span> simple_fsm;</span><br><span class="line"><span class="comment">-----------------------------------------------</span></span><br><span class="line"><span class="keyword">ARCHITECTURE</span> simple_fsm <span class="keyword">OF</span> simple_fsm <span class="keyword">IS</span></span><br><span class="line"><span class="keyword">TYPE</span> state <span class="keyword">IS</span> (stateA, stateB);</span><br><span class="line"><span class="keyword">SIGNAL</span> pr_state, nx_state: state;</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="comment">----------Lower section: ----------------------</span></span><br><span class="line"><span class="keyword">PROCESS</span> (rst, clk)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">IF</span> (rst = <span class="string">&#x27;1&#x27;</span>) <span class="keyword">THEN</span></span><br><span class="line">pr_state &lt;= stateA;</span><br><span class="line">    <span class="keyword">ELSIF</span> (clk<span class="symbol">&#x27;EVENT</span> <span class="keyword">AND</span> clk = <span class="string">&#x27;1&#x27;</span>) <span class="keyword">THEN</span></span><br><span class="line">pr_state &lt;= nx_state;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">PROCESS</span>;</span><br><span class="line"><span class="comment">-------------Upper section: --------------------</span></span><br><span class="line"><span class="keyword">PROCESS</span> (a, b, d, pr_state)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">CASE</span> pr_state <span class="keyword">IS</span></span><br><span class="line">    <span class="keyword">WHEN</span> stateA =&gt;</span><br><span class="line">x &lt;= a;</span><br><span class="line"><span class="keyword">IF</span> (d = <span class="string">&#x27;1&#x27;</span>) <span class="keyword">THEN</span></span><br><span class="line">nx_state &lt;= stateB;</span><br><span class="line"><span class="keyword">ELSE</span></span><br><span class="line">    nx_state &lt;= stateA;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">    <span class="keyword">WHEN</span> stateB =&gt;</span><br><span class="line">x &lt;= b;</span><br><span class="line"><span class="keyword">IF</span> (d = <span class="string">&#x27;1&#x27;</span>) <span class="keyword">THEN</span> </span><br><span class="line">    nx_state &lt;= stateA;</span><br><span class="line"><span class="keyword">ELSE</span></span><br><span class="line">    nx_state &lt;= stateB;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">PROCESS</span>;</span><br><span class="line"><span class="keyword">END</span> simple_fsm;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></div><p>RTL图：<img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302161440523.png"                      alt="image.png"                ></p><hr><p>输出端有同步</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LIBRARY</span> ieee;</span><br><span class="line"><span class="keyword">USE</span> ieee.std_logic_1164.<span class="keyword">all</span>;</span><br><span class="line"><span class="comment">-----------------------------------------------</span></span><br><span class="line"><span class="keyword">ENTITY</span> simple_fsm <span class="keyword">IS</span></span><br><span class="line"><span class="keyword">PORT</span> (a, b, d, clk, rst: <span class="keyword">IN</span> <span class="built_in">BIT</span>;</span><br><span class="line">      x: <span class="keyword">OUT</span> <span class="built_in">BIT</span>);</span><br><span class="line"><span class="keyword">END</span> simple_fsm;</span><br><span class="line"><span class="comment">-----------------------------------------------</span></span><br><span class="line"><span class="keyword">ARCHITECTURE</span> simple_fsm <span class="keyword">OF</span> simple_fsm <span class="keyword">IS</span></span><br><span class="line"><span class="keyword">TYPE</span> state <span class="keyword">IS</span> (stateA, stateB);</span><br><span class="line"><span class="keyword">SIGNAL</span> pr_state, nx_state: state;</span><br><span class="line"><span class="keyword">SIGNAL</span> temp: <span class="built_in">BIT</span> := <span class="string">&#x27;0&#x27;</span>;  <span class="comment">-- 多了这个全局的temp,作为中间变量，在改变状态时进行改变</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="comment">----------Lower section: ----------------------</span></span><br><span class="line"><span class="keyword">PROCESS</span> (rst, clk)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">IF</span> (rst = <span class="string">&#x27;1&#x27;</span>) <span class="keyword">THEN</span></span><br><span class="line">pr_state &lt;= stateA;</span><br><span class="line">    <span class="keyword">ELSIF</span> (clk<span class="symbol">&#x27;EVENT</span> <span class="keyword">AND</span> clk = <span class="string">&#x27;1&#x27;</span>) <span class="keyword">THEN</span></span><br><span class="line">x &lt;= temp;</span><br><span class="line">pr_state &lt;= nx_state;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">PROCESS</span>;</span><br><span class="line"><span class="comment">-------------Upper section: --------------------</span></span><br><span class="line"><span class="keyword">PROCESS</span> (a, b, d, pr_state)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">CASE</span> pr_state <span class="keyword">IS</span></span><br><span class="line">    <span class="keyword">WHEN</span> stateA =&gt;</span><br><span class="line">temp &lt;= a;</span><br><span class="line"><span class="keyword">IF</span> (d = <span class="string">&#x27;1&#x27;</span>) <span class="keyword">THEN</span></span><br><span class="line">    nx_state &lt;= stateB;</span><br><span class="line"><span class="keyword">ELSE</span></span><br><span class="line">    nx_state &lt;= stateA;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">    <span class="keyword">WHEN</span> stateB =&gt;</span><br><span class="line">temp &lt;= b;</span><br><span class="line"><span class="keyword">IF</span> (d = <span class="string">&#x27;1&#x27;</span>) <span class="keyword">THEN</span> </span><br><span class="line">    nx_state &lt;= stateA;</span><br><span class="line"><span class="keyword">ELSE</span></span><br><span class="line">    nx_state &lt;= stateB;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">PROCESS</span>;</span><br><span class="line"><span class="keyword">END</span> simple_fsm;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><p>RTL图：<img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302161446002.png"                      alt="image.png"                ></p><p>仿真对比：<img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302161446393.png"                      alt="image.png"                ><br>结论： 同步之后（利用temp一起作为输出）同时存储了output<br>Mealy型需要该操作才能设计同步时序电路<br>Moore则不需要</p><h2 id="使用三种进程描述状态机"><a href="#使用三种进程描述状态机" class="headerlink" title="使用三种进程描述状态机"></a>使用三种进程描述状态机</h2><p>单，双，三：<br><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302161452705.png"                      alt="image.png"                ></p><p>单进程：</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LIBRARY</span> IEEE;</span><br><span class="line"><span class="keyword">USE</span> IEEE.STD_LOGIC_1164.<span class="keyword">ALL</span>;</span><br><span class="line"><span class="keyword">ENTITY</span> s_machine1 <span class="keyword">IS</span></span><br><span class="line"><span class="keyword">PORT</span> ( clk, reset : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC</span>;</span><br><span class="line">   state_inputs : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC_VECTOR</span> (<span class="number">0</span> <span class="keyword">TO</span> <span class="number">1</span>);</span><br><span class="line">   comb_outputs : <span class="keyword">OUT</span> <span class="built_in">INTEGER</span> <span class="keyword">RANGE</span> <span class="number">0</span> <span class="keyword">TO</span> <span class="number">15</span> );</span><br><span class="line"><span class="keyword">END</span> s_machine2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">ARCHITECTURE</span> behv <span class="keyword">OF</span> s_machine1 <span class="keyword">IS</span></span><br><span class="line"><span class="keyword">TYPE</span> FSM_ST <span class="keyword">IS</span> (s0, s1, s2, s3);</span><br><span class="line"><span class="keyword">SIGnAL</span> state: FSM_ST;</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">PROCESS</span> (reset, clk, state, state_inputs)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">IF</span> reset = <span class="string">&#x27;1&#x27;</span> <span class="keyword">THEN</span> </span><br><span class="line">state &lt;= s0;</span><br><span class="line">    <span class="keyword">ELSIF</span> clk = <span class="string">&#x27;1&#x27;</span> <span class="keyword">AND</span> clk<span class="symbol">&#x27;EVENT</span></span><br><span class="line">    <span class="keyword">THEN</span></span><br><span class="line">    <span class="keyword">CASE</span> state <span class="keyword">IS</span></span><br><span class="line"><span class="keyword">WHEN</span> s0 =&gt; </span><br><span class="line">    comb_outputs &lt;= <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">IF</span> state_inputs = <span class="string">&quot;00&quot;</span> <span class="keyword">THEN</span> </span><br><span class="line">        state &lt;= s0;</span><br><span class="line">    <span class="keyword">ELSE</span> </span><br><span class="line">        state &lt;= s1;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"><span class="keyword">WHEN</span> s1 =&gt; </span><br><span class="line">    comb_outputs &lt;= <span class="number">8</span>;</span><br><span class="line">    <span class="keyword">IF</span> state_inputs = <span class="string">&quot;00&quot;</span> <span class="keyword">THEN</span> </span><br><span class="line">        state &lt;= s1;</span><br><span class="line">    <span class="keyword">ELSE</span> </span><br><span class="line">        state &lt;= s2;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"><span class="keyword">WHEN</span> s2 =&gt;</span><br><span class="line">    comb_outputs &lt;= <span class="number">12</span>;</span><br><span class="line">    <span class="keyword">IF</span> state_inputs = <span class="string">&quot;11&quot;</span> <span class="keyword">THEN</span> </span><br><span class="line">        state &lt;= s3;</span><br><span class="line">    <span class="keyword">ELSE</span> </span><br><span class="line">        state &lt;= s0;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"><span class="keyword">WHEN</span> s3 =&gt; </span><br><span class="line">    comb_outputs &lt;= <span class="number">14</span>;</span><br><span class="line">    <span class="keyword">IF</span> state_inputs = <span class="string">&quot;11&quot;</span> <span class="keyword">THEN</span></span><br><span class="line">        state &lt;= s3;</span><br><span class="line">    <span class="keyword">ELSE</span> </span><br><span class="line">        state &lt;= s0;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">END</span> <span class="keyword">PROCESS</span>;</span><br><span class="line"><span class="keyword">END</span> behv; <span class="comment">--（完）</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></div><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302161525995.png"                      alt="image.png"                ></p><p>(请耐心看完)</p><p>双进程：</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LIBRARY</span> IEEE;</span><br><span class="line"><span class="keyword">USE</span> IEEE.STD_LOGIC_1164.<span class="keyword">ALL</span>;</span><br><span class="line"><span class="keyword">ENTITY</span> s_machine <span class="keyword">IS</span></span><br><span class="line"><span class="keyword">PORT</span> ( clk, reset : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC</span>;</span><br><span class="line">   state_inputs : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC_VECTOR</span> (<span class="number">0</span> <span class="keyword">TO</span> <span class="number">1</span>);</span><br><span class="line">   comb_outputs : <span class="keyword">OUT</span> <span class="built_in">INTEGER</span> <span class="keyword">RANGE</span> <span class="number">0</span> <span class="keyword">TO</span> <span class="number">15</span> );</span><br><span class="line"><span class="keyword">END</span> s_machine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">ARCHITECTURE</span> behv <span class="keyword">OF</span> s_machine <span class="keyword">IS</span></span><br><span class="line"><span class="keyword">TYPE</span> FSM_ST <span class="keyword">IS</span> (s0, s1, s2, s3);</span><br><span class="line"><span class="keyword">SIGNAL</span> current_state, next_state : FSM_ST;</span><br><span class="line"><span class="comment">--------------------------------</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">REG: <span class="keyword">PROCESS</span> (reset, clk)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">IF</span> reset = <span class="string">&#x27;1&#x27;</span> <span class="keyword">THEN</span> current_state &lt;= s0;</span><br><span class="line">    <span class="keyword">ELSIF</span> clk = <span class="string">&#x27;1&#x27;</span> <span class="keyword">AND</span> clk<span class="symbol">&#x27;EVENT</span> <span class="keyword">THEN</span></span><br><span class="line">  current_state &lt;= next_state;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">PROCESS</span>;</span><br><span class="line"><span class="comment">------------------------------</span></span><br><span class="line">COM: <span class="keyword">PROCESS</span> (current_state, state_inputs)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">CASE</span> current_state <span class="keyword">IS</span></span><br><span class="line">    <span class="keyword">WHEN</span> s0 =&gt; </span><br><span class="line">        comb_outputs &lt;= <span class="number">5</span>;</span><br><span class="line">  <span class="keyword">IF</span> state_inputs = <span class="string">&quot;00&quot;</span> <span class="keyword">THEN</span> </span><br><span class="line">      next_state &lt;= s0;</span><br><span class="line">  <span class="keyword">ELSE</span> </span><br><span class="line">  next_state &lt;= s1;</span><br><span class="line">  <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">WHEN</span> s1 =&gt; </span><br><span class="line">  comb_outputs &lt;= <span class="number">8</span>;</span><br><span class="line">  <span class="keyword">IF</span> state_inputs = <span class="string">&quot;00&quot;</span> <span class="keyword">THEN</span> </span><br><span class="line">      next_state &lt;= s1;</span><br><span class="line">  <span class="keyword">ELSE</span> </span><br><span class="line">      next_state &lt;= s2;</span><br><span class="line">  <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">    <span class="keyword">WHEN</span> s2 =&gt;</span><br><span class="line">  comb_outputs &lt;= <span class="number">12</span>;</span><br><span class="line">  <span class="keyword">IF</span> state_inputs = <span class="string">&quot;11&quot;</span> <span class="keyword">THEN</span> </span><br><span class="line">      next_state &lt;= s3;</span><br><span class="line">  <span class="keyword">ELSE</span> </span><br><span class="line">      next_state &lt;= s0;</span><br><span class="line">  <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">    <span class="keyword">WHEN</span> s3 =&gt; </span><br><span class="line">    comb_outputs &lt;= <span class="number">14</span>;</span><br><span class="line">  <span class="keyword">IF</span> state_inputs = <span class="string">&quot;11&quot;</span> <span class="keyword">THEN</span></span><br><span class="line">      next_state &lt;= s3;</span><br><span class="line">  <span class="keyword">ELSE</span> </span><br><span class="line">      next_state &lt;= s0;</span><br><span class="line">        <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">PROCESS</span>;</span><br><span class="line"><span class="keyword">END</span> behv;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></div><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302161525490.png"                      alt="image.png"                ></p><p>三进程：</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LIBRARY</span> IEEE;</span><br><span class="line"><span class="keyword">USE</span> IEEE.STD_LOGIC_1164.<span class="keyword">ALL</span>;</span><br><span class="line"><span class="keyword">ENTITY</span> s_machine2 <span class="keyword">IS</span></span><br><span class="line"><span class="keyword">PORT</span> ( clk, reset : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC</span>;</span><br><span class="line">state_inputs : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC_VECTOR</span> (<span class="number">0</span> <span class="keyword">TO</span> <span class="number">1</span>);</span><br><span class="line">comb_outputs : <span class="keyword">OUT</span> <span class="built_in">INTEGER</span> <span class="keyword">RANGE</span> <span class="number">0</span> <span class="keyword">TO</span> <span class="number">15</span> );</span><br><span class="line"><span class="keyword">END</span> s_machine2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">ARCHITECTURE</span> behv <span class="keyword">OF</span> s_machine2 <span class="keyword">IS</span></span><br><span class="line"><span class="keyword">TYPE</span> FSM_ST <span class="keyword">IS</span> (s0, s1, s2, s3);</span><br><span class="line"><span class="keyword">SIGNAL</span> current_state, next_state: FSM_ST;</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">REG: <span class="keyword">PROCESS</span> (reset, clk)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">IF</span> reset = <span class="string">&#x27;1&#x27;</span> <span class="keyword">THEN</span> </span><br><span class="line">            current_state &lt;= s0;</span><br><span class="line">    <span class="keyword">ELSIF</span> clk = <span class="string">&#x27;1&#x27;</span> <span class="keyword">AND</span> clk<span class="symbol">&#x27;EVENT</span> <span class="keyword">THEN</span></span><br><span class="line"> current_state &lt;= next_state;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">PROCESS</span>;</span><br><span class="line"><span class="comment">--状态逻辑</span></span><br><span class="line"><span class="comment">------------------------------------------------------</span></span><br><span class="line">COM_STATE: <span class="keyword">PROCESS</span>(current_state, state_inputs)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">CASE</span> current_state <span class="keyword">IS</span></span><br><span class="line">    <span class="keyword">WHEN</span> s0 =&gt; </span><br><span class="line">        <span class="keyword">IF</span> state_inputs = <span class="string">&quot;00&quot;</span> <span class="keyword">THEN</span> </span><br><span class="line">      next_state &lt;= s0;</span><br><span class="line">  <span class="keyword">ELSE</span> </span><br><span class="line">      next_state &lt;= s1;</span><br><span class="line">  <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">WHEN</span> s1 =&gt; </span><br><span class="line">  <span class="keyword">IF</span> state_inputs = <span class="string">&quot;01&quot;</span> <span class="keyword">THEN</span> </span><br><span class="line">      next_state &lt;= s1;</span><br><span class="line"><span class="keyword">ELSE</span> </span><br><span class="line">next_state &lt;= s2;</span><br><span class="line">      <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">  <span class="keyword">WHEN</span> s2 =&gt;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">IF</span> state_inputs = <span class="string">&quot;10&quot;</span> <span class="keyword">THEN</span> </span><br><span class="line">next_state &lt;= s3;</span><br><span class="line">      <span class="keyword">ELSE</span> </span><br><span class="line">          next_state &lt;= s0;</span><br><span class="line">      <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">  <span class="keyword">WHEN</span> s3 =&gt; </span><br><span class="line">      <span class="keyword">IF</span> state_inputs = <span class="string">&quot;11&quot;</span> <span class="keyword">THEN</span></span><br><span class="line">next_state &lt;= s3;</span><br><span class="line">      <span class="keyword">ELSE</span> </span><br><span class="line">          next_state &lt;= s0;</span><br><span class="line">      <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">  <span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">PROCESS</span>; </span><br><span class="line">    <span class="comment">--- 次态逻辑</span></span><br><span class="line"><span class="comment">---------------------------------------------</span></span><br><span class="line">    COM_OUT: <span class="keyword">PROCESS</span> (current_state)</span><br><span class="line">    <span class="keyword">BEGIN</span></span><br><span class="line">  <span class="keyword">CASE</span> current_state <span class="keyword">IS</span></span><br><span class="line">  <span class="keyword">WHEN</span> s0 =&gt;</span><br><span class="line">      comb_outputs &lt;= <span class="number">5</span>;</span><br><span class="line">  <span class="keyword">WHEN</span> s1 =&gt;</span><br><span class="line">      comb_outputs &lt;= <span class="number">8</span>;</span><br><span class="line">  <span class="keyword">WHEN</span> s2 =&gt;</span><br><span class="line">      comb_outputs &lt;= <span class="number">12</span>;</span><br><span class="line">  <span class="keyword">WHEN</span> s3 =&gt;</span><br><span class="line">      comb_outputs &lt;= <span class="number">14</span>;</span><br><span class="line">        <span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">PROCESS</span>;</span><br><span class="line"><span class="keyword">END</span> behv;</span><br><span class="line"><span class="comment">-- 输出逻辑</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></div><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302161529983.png"                      alt="image.png"                ></p><hr><p>单进程描述的状态机的RTL电路相较于两外两种多了一个  <strong>寄存器</strong><br>而 双进程与三进程则对于简单的设计一样（更为建议）</p><hr><h2 id="串流数据流检测器"><a href="#串流数据流检测器" class="headerlink" title="串流数据流检测器"></a>串流数据流检测器</h2><p>设计一个串行数据流检测器。<br>要求：输入连续的二进制数，当检测到连续“1”的个数大于3个的时候，输出“1”；其他状态输出“0”。</p><p>分析：确定所需的状态数，取决于数据流中出现连续“1”的个数，应该为4个状态。</p><p>画出ASM图：<br><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302161536819.png"                      alt="image.png"                ></p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LIBRARY</span> ieee;</span><br><span class="line"><span class="keyword">USE</span> ieee.std_logic_1164.<span class="keyword">all</span>;</span><br><span class="line"><span class="comment">----------------------------------------</span></span><br><span class="line"><span class="keyword">ENTITY</span> string_detector <span class="keyword">IS</span></span><br><span class="line"><span class="keyword">PORT</span> (d, clk, rst: <span class="keyword">IN</span> <span class="built_in">BIT</span>;</span><br><span class="line">      q: <span class="keyword">OUT</span> <span class="built_in">BIT</span>);</span><br><span class="line"><span class="keyword">END</span> string_detector;</span><br><span class="line"><span class="comment">---------------------------------------</span></span><br><span class="line"><span class="keyword">ARCHITECTURE</span> my_arch <span class="keyword">OF</span> string_detector <span class="keyword">IS</span></span><br><span class="line"><span class="keyword">TYPE</span> state <span class="keyword">IS</span> (zero, one ,two, three);</span><br><span class="line"><span class="keyword">SIGNAL</span> pr_state, nx_state: state;</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="comment">-----------Lower section;-----------</span></span><br><span class="line"><span class="keyword">PROCESS</span> (rst, clk)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">IF</span> (rst = <span class="string">&#x27;1&#x27;</span>) <span class="keyword">THEN</span></span><br><span class="line">        pr_state &lt;= zero;</span><br><span class="line">    <span class="keyword">ELSIF</span> (clk<span class="symbol">&#x27;EVENT</span> <span class="keyword">AND</span> clk = <span class="string">&#x27;1&#x27;</span>) <span class="keyword">THEN</span></span><br><span class="line">        pr_state &lt;= nx_state;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">PROCESS</span>;</span><br><span class="line"><span class="comment">-----------Upper section:------------</span></span><br><span class="line"><span class="keyword">PROCESS</span> (d, pr_state)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">CASE</span> pr_state <span class="keyword">IS</span></span><br><span class="line">    <span class="keyword">WHEN</span> zero =&gt;</span><br><span class="line">        q &lt;= <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        <span class="keyword">IF</span> (d = <span class="string">&#x27;1&#x27;</span>) <span class="keyword">THEN</span></span><br><span class="line">    nx_state &lt;= one;</span><br><span class="line"><span class="keyword">ELSE</span></span><br><span class="line">        nx_state &lt;= zero;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"><span class="keyword">WHEN</span> one =&gt;</span><br><span class="line">q &lt;= <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line"><span class="keyword">IF</span> (d = <span class="string">&#x27;1&#x27;</span>) <span class="keyword">THEN</span></span><br><span class="line">    nx_state &lt;= two;</span><br><span class="line"><span class="keyword">ELSE</span></span><br><span class="line">    nx_state &lt;= zero;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"><span class="keyword">WHEN</span> two =&gt;</span><br><span class="line">q &lt;= <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line"><span class="keyword">IF</span> (d = <span class="string">&#x27;1&#x27;</span>) <span class="keyword">THEN</span></span><br><span class="line">    nx_state &lt;= </span><br><span class="line">three;</span><br><span class="line"><span class="keyword">ELSE</span></span><br><span class="line">    nx_state &lt;= zero;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"><span class="keyword">WHEN</span> three =&gt;</span><br><span class="line">q &lt;= <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line"><span class="keyword">IF</span> (d = <span class="string">&#x27;1&#x27;</span>) <span class="keyword">THEN</span></span><br><span class="line">   nx_state &lt;= three;</span><br><span class="line">    <span class="keyword">ELSE</span></span><br><span class="line">   nx_state &lt;= zero;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"> <span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">PROCESS</span>;</span><br><span class="line"><span class="keyword">END</span> my_arch;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></div><p>综合后是 使用的one-hot 编码<br><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302161544787.png"                      alt="image.png"                ><br>如果需要指定编码则可以使用attribute语句<br>将结构体的声明部分添加如下代码</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ATTRIBUTE</span> enum_encoding: <span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">ATTRIBUTE</span> enum_encoding <span class="keyword">OF</span> state : <span class="keyword">TYPE</span> <span class="keyword">IS</span> <span class="string">&quot;00 01 10 11&quot;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><p>软件设置： FSM Explorer 选项勾选，综合后也是one-hot编码</p>]]></content>
      
      
      
        <tags>
            
            <tag> VHDL 学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VHDL第四章时序逻辑电路</title>
      <link href="/2023/02/15/VHDL%E7%AC%AC%E5%9B%9B%E7%AB%A0%E6%97%B6%E5%BA%8F%E9%80%BB%E8%BE%91%E7%94%B5%E8%B7%AF/"/>
      <url>/2023/02/15/VHDL%E7%AC%AC%E5%9B%9B%E7%AB%A0%E6%97%B6%E5%BA%8F%E9%80%BB%E8%BE%91%E7%94%B5%E8%B7%AF/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>输出不仅与当前输入有关，还与原始状态有关</p><p>组合逻辑电路+ <strong>存储电路</strong>（包含有 触发器，寄存器等）</p><ol><li>锁存器</li><li>触发器</li><li>寄存器</li><li>计数器</li><li>乘法器<br>时序电路引进了 现态和次态的概念<br>可以使用逻辑表达式来进行描述</li></ol><p>#分类</p><ul><li>按照触发器（动作特点）<blockquote><pre><code>同步时序逻辑电路，同一个时钟信号。异步时序逻辑电路，没有统一的时钟脉冲信号，触发器的变化有前有后。</code></pre></blockquote></li></ul><p>按照输出信号的特点</p><blockquote><pre><code>米丽（Mealy）输入状态不仅与存储电路状态Q有关，并且与外部输入X有关。摩尔（Moore）输出状态仅与存储电路的状态Q有关 无关输入X。</code></pre></blockquote><h1 id="时序逻辑电路——锁存器"><a href="#时序逻辑电路——锁存器" class="headerlink" title="时序逻辑电路——锁存器"></a>时序逻辑电路——<strong>锁存器</strong></h1><ul><li>RS锁存器<br>根据真值表来进行判断<table><thead><tr><th align="center">S</th><th align="center">R</th><th align="center">Q</th><th align="center">~Q</th></tr></thead><tbody><tr><td align="center">0</td><td align="center">0</td><td align="center">1</td><td align="center">1</td></tr><tr><td align="center">0</td><td align="center">1</td><td align="center">0</td><td align="center">1</td></tr><tr><td align="center">1</td><td align="center">0</td><td align="center">1</td><td align="center">0</td></tr><tr><td align="center">1</td><td align="center">1</td><td align="center">Q</td><td align="center">~Q</td></tr></tbody></table></li></ul><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Library</span>  ieee;</span><br><span class="line"><span class="keyword">Use</span>  ieee.std_logic_1164.<span class="keyword">all</span>;</span><br><span class="line"><span class="keyword">Entity</span>  SR_latch2  <span class="keyword">is</span> </span><br><span class="line">    <span class="keyword">port</span> ( S, R: <span class="keyword">in</span>  <span class="built_in">std_logic</span> ;</span><br><span class="line">             Q, Qbar :<span class="keyword">out</span>  <span class="built_in">std_logic</span>);</span><br><span class="line"><span class="keyword">End</span>  SR_latch2;</span><br><span class="line"><span class="keyword">Architecture</span>  behav  <span class="keyword">of</span>   R_latch2  <span class="keyword">is</span></span><br><span class="line"><span class="keyword">Begin</span></span><br><span class="line"> <span class="keyword">process</span> ( R , S ) <span class="keyword">is</span></span><br><span class="line">      <span class="keyword">variable</span> rs: <span class="built_in">std_logic_vector</span>(<span class="number">1</span> <span class="keyword">downto</span> <span class="number">0</span>);</span><br><span class="line"><span class="keyword">begin</span> </span><br><span class="line">      rs:=R&amp;S;</span><br><span class="line">      <span class="keyword">case</span> rs <span class="keyword">is</span></span><br><span class="line">          <span class="keyword">when</span> <span class="string">&quot;00&quot;</span> =&gt; Q&lt;=<span class="string">&#x27;1&#x27;</span>; Qbar&lt;=<span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">          <span class="keyword">when</span> <span class="string">&quot;01&quot;</span> =&gt; Q&lt;=<span class="string">&#x27;1&#x27;</span>; Qbar&lt;=<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">          <span class="keyword">when</span> <span class="string">&quot;10&quot;</span> =&gt; Q&lt;=<span class="string">&#x27;0&#x27;</span>; Qbar&lt;=<span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">          <span class="keyword">when</span> <span class="keyword">others</span>=&gt;<span class="keyword">null</span>;</span><br><span class="line">       <span class="keyword">end</span> <span class="keyword">case</span>;</span><br><span class="line">   <span class="keyword">end</span> <span class="keyword">process</span>;</span><br><span class="line"><span class="keyword">end</span> behav;</span><br><span class="line"><span class="comment">--敏感参数有R和S</span></span><br></pre></td></tr></table></figure></div><p>D锁存器<br>D锁存器通过<strong>条件涵盖不完整的if语句</strong> 产生寄存器；<br>#值得一看<br>敏感参数表包含D、Enable，综合后  形成一个电平触发的锁存器</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Library</span>  ieee;</span><br><span class="line"><span class="keyword">Use</span>  ieee.std_logic_1164.<span class="keyword">all</span>;</span><br><span class="line"><span class="keyword">Entity</span>  D_latch  <span class="keyword">is</span></span><br><span class="line">     <span class="keyword">port</span> ( D, Enable: <span class="keyword">in</span>  <span class="built_in">std_logic</span> ;</span><br><span class="line">               Q: <span class="keyword">out</span>  <span class="built_in">std_logic</span> );</span><br><span class="line"><span class="keyword">End</span>  D_latch;</span><br><span class="line"><span class="keyword">Architecture</span>  behav  <span class="keyword">of</span>   D_latch  <span class="keyword">is</span></span><br><span class="line"><span class="keyword">Begin</span></span><br><span class="line">      <span class="keyword">process</span>(D, Enable) </span><br><span class="line">      <span class="keyword">begin</span></span><br><span class="line">           <span class="keyword">if</span> (Enable=‘<span class="number">1</span>’) <span class="keyword">then</span>  Q&lt;=D;</span><br><span class="line">           <span class="keyword">end</span>  <span class="keyword">if</span>;</span><br><span class="line">      <span class="keyword">end</span>  <span class="keyword">process</span>;</span><br><span class="line"><span class="keyword">End</span>  behav;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><h1 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h1><p>触发器是指<strong>边沿触发</strong>的寄存器，常见的有<strong>D型，JK型，T型</strong>。在描述触发器前要注意时钟上升沿的描述</p><h2 id="D触发器"><a href="#D触发器" class="headerlink" title="D触发器"></a>D触发器</h2><p>一个D 一个Clock<br>输出一个Q</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span> ieee;</span><br><span class="line"><span class="keyword">use</span> ieee.std_logic_1164.<span class="keyword">all</span>;</span><br><span class="line"><span class="keyword">entity</span> d_ff1 <span class="keyword">is</span></span><br><span class="line"><span class="keyword">port</span>(D,clk: <span class="keyword">in</span> <span class="built_in">std_logic</span>;</span><br><span class="line">Q:<span class="keyword">out</span> <span class="built_in">std_logic</span>);</span><br><span class="line"><span class="keyword">end</span> d_ff1;</span><br><span class="line"><span class="keyword">architecture</span> behav <span class="keyword">of</span> d_ff1 <span class="keyword">is</span></span><br><span class="line"><span class="keyword">begin</span> </span><br><span class="line"><span class="keyword">process</span>(clk)</span><br><span class="line"><span class="keyword">begin</span> </span><br><span class="line"><span class="keyword">if</span>(clk&#x27; event <span class="keyword">and</span> clk = <span class="string">&#x27;1&#x27;</span>)</span><br><span class="line"><span class="keyword">then</span> Q&lt;=D;</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">if</span> ;</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">process</span>;</span><br><span class="line"><span class="keyword">end</span> behav;</span><br><span class="line"><span class="comment">---第二种方式</span></span><br><span class="line"><span class="keyword">process</span></span><br><span class="line">       <span class="keyword">begin</span> </span><br><span class="line">             <span class="keyword">wait</span> <span class="keyword">until</span> (clk=‘<span class="number">1</span>’) ;  </span><br><span class="line"><span class="comment">--等同于 wait until clk’event and clk=‘1’；</span></span><br><span class="line">             Q&lt;=D;</span><br><span class="line">       <span class="keyword">end</span> <span class="keyword">process</span>;</span><br><span class="line"><span class="keyword">End</span> behav;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></div><p>时钟边沿检测到的方法 #值得一看 </p><blockquote><ol><li>上升沿：clock’  event and clock&#x3D;‘1’<br>下降沿：clock’  event and clock&#x3D;‘0’;<ol start="2"><li>利用WAIT语句启动进程，检测colck的上升沿</li><li>Process 和 if语句的相结合  利用clk启动进程，并进行判断</li></ol></li></ol></blockquote><h2 id="带Q非的D触发器"><a href="#带Q非的D触发器" class="headerlink" title="带Q非的D触发器"></a>带Q非的D触发器</h2><p>不是简单的按照前面直接加上一个Qbar<br>如<code>Qbar = NOT D</code><br>时钟上升沿会有两个赋值，导致有两个D触发器</p><p>解决方式</p><ol><li><p>信号法：</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">architecture</span> sig <span class="keyword">of</span> D_ff <span class="keyword">is</span></span><br><span class="line"><span class="keyword">signal</span> state: <span class="built_in">std_logic</span>;</span><br><span class="line"><span class="keyword">begin</span> </span><br><span class="line"><span class="keyword">process</span>(clock, reset)</span><br><span class="line"><span class="keyword">begin</span> </span><br><span class="line"><span class="keyword">if</span>(reset=<span class="string">&#x27;0&#x27;</span>)<span class="keyword">then</span> </span><br><span class="line">state&lt;=<span class="string">&#x27;0&#x27;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">if</span> rising_edge(clock)</span><br><span class="line"><span class="keyword">then</span> state&lt;=D;</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">process</span>;</span><br><span class="line">Q&lt;=state;</span><br><span class="line">Qbar&lt;=<span class="keyword">not</span> state;</span><br><span class="line"><span class="keyword">end</span> sig;</span><br><span class="line"><span class="comment">--利用信号作为中间变量，D触发器</span></span><br></pre></td></tr></table></figure></div></li><li><p>变量法：</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Architecture</span> var <span class="keyword">of</span> D_FF <span class="keyword">is</span> </span><br><span class="line"><span class="keyword">Begin</span></span><br><span class="line">     <span class="keyword">process</span>(clock, reset)</span><br><span class="line">         <span class="keyword">variable</span> state: <span class="built_in">std_logic</span> ;</span><br><span class="line">     <span class="keyword">begin</span></span><br><span class="line">         <span class="keyword">if</span> (reset=‘<span class="number">0</span>’) <span class="keyword">then</span>  state:=‘<span class="number">0</span>’;</span><br><span class="line">         <span class="keyword">elsif</span> rising_edge(clock)</span><br><span class="line">         <span class="keyword">then</span> state:=D;</span><br><span class="line">         <span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line">         Q&lt;=state;</span><br><span class="line">         Qbar&lt;=<span class="keyword">not</span> state;</span><br><span class="line">      <span class="keyword">end</span> <span class="keyword">process</span>;</span><br><span class="line"><span class="keyword">End</span> var;</span><br><span class="line"><span class="comment">--跟变量法相似，只是state的范围限定在process内</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></div></li></ol><h2 id="JK触发器"><a href="#JK触发器" class="headerlink" title="JK触发器"></a>JK触发器</h2><p>四个输入J K R（reset） Clock </p><p>两个输出 Q Qbar</p><table><thead><tr><th>J</th><th>K</th><th align="center">Q</th><th>Qbar</th></tr></thead><tbody><tr><td>0</td><td>0</td><td align="center">Q</td><td>Qbar</td></tr><tr><td>0</td><td>1</td><td align="center">0</td><td>1</td></tr><tr><td>1</td><td>0</td><td align="center">1</td><td>0</td></tr><tr><td>1</td><td>1</td><td align="center">Qbar</td><td>Q</td></tr></tbody></table><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">entity</span> JK_ff <span class="keyword">is</span></span><br><span class="line"><span class="keyword">port</span>(J,K: <span class="keyword">in</span> <span class="built_in">std_logic</span>;</span><br><span class="line">clock,reset: <span class="keyword">in</span> <span class="built_in">std_logic</span>;</span><br><span class="line">Q, Qbar: <span class="keyword">out</span> <span class="built_in">std_logic</span>);</span><br><span class="line"><span class="keyword">end</span> JK_ff;</span><br><span class="line"><span class="keyword">architecture</span> behav <span class="keyword">of</span> JK_ff <span class="keyword">is</span></span><br><span class="line"><span class="keyword">signal</span> state:<span class="built_in">std_logic</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">process</span>( clock, reset) <span class="keyword">is</span></span><br><span class="line">     <span class="keyword">variable</span> jk: <span class="built_in">std_logic_vector</span>(<span class="number">1</span> <span class="keyword">downto</span> <span class="number">0</span>); </span><br><span class="line">      <span class="keyword">begin</span></span><br><span class="line">           jk:=J&amp;K;</span><br><span class="line">           <span class="keyword">if</span>  (reset=‘<span class="number">0</span>’) <span class="keyword">then</span> state&lt;=‘<span class="number">0</span>’;</span><br><span class="line">            <span class="keyword">elsif</span>  rising_edge(clock) <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">case</span> jk <span class="keyword">is</span></span><br><span class="line">        <span class="keyword">when</span> “<span class="number">11</span>”=&gt; state&lt;=<span class="keyword">not</span> state;</span><br><span class="line">        <span class="keyword">when</span> “<span class="number">10</span>”=&gt; state&lt;=‘<span class="number">1</span>’;</span><br><span class="line">        <span class="keyword">when</span> “<span class="number">01</span>”=&gt; state&lt;=‘<span class="number">0</span>’;</span><br><span class="line">        <span class="keyword">when</span> <span class="keyword">others</span>  =&gt; <span class="keyword">null</span>;  </span><br><span class="line">        <span class="keyword">end</span> <span class="keyword">case</span>;</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">process</span>;</span><br><span class="line">      Q&lt;=state;</span><br><span class="line">      Qbar&lt;=<span class="keyword">not</span> state ;</span><br><span class="line"><span class="keyword">end</span>  behav</span><br></pre></td></tr></table></figure></div><p>**CASE语句要完整,所以在CASE JK的时候要加<br>when others &#x3D;&gt;null;</p><h2 id="T触发器"><a href="#T触发器" class="headerlink" title="T触发器"></a>T触发器</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302151611179.png"                      alt="image.png"                ></p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Entity</span> T_FF <span class="keyword">is</span></span><br><span class="line">     <span class="keyword">port</span> ( T, clock, reset : <span class="keyword">in</span>  <span class="built_in">std_logic</span> ;</span><br><span class="line">               Q, Qbar : <span class="keyword">out</span>  <span class="built_in">std_logic</span> );</span><br><span class="line"><span class="keyword">End</span> T_FF;</span><br><span class="line"><span class="keyword">Architecture</span>  behav  <span class="keyword">of</span>   T_FF  <span class="keyword">is</span></span><br><span class="line"><span class="keyword">Begin</span></span><br><span class="line">      <span class="keyword">process</span>(clock, reset)</span><br><span class="line">           <span class="keyword">variable</span>  state:  <span class="built_in">std_logic</span> ;     </span><br><span class="line">      <span class="keyword">begin</span> </span><br><span class="line">          <span class="keyword">if</span>  (reset =‘<span class="number">0</span>’)  <span class="keyword">then</span> state:=‘<span class="number">0</span>’;</span><br><span class="line">          <span class="keyword">elsif</span>  rising_edge(clock) <span class="keyword">then</span></span><br><span class="line">               <span class="keyword">if</span>   T=‘<span class="number">1</span>’<span class="keyword">then</span> </span><br><span class="line">                     state := <span class="keyword">not</span> state;</span><br><span class="line">                <span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line">            <span class="keyword">end</span> <span class="keyword">if</span> ;</span><br><span class="line">            Q&lt;=state;</span><br><span class="line">            Qbar&lt;= <span class="keyword">not</span> state;</span><br><span class="line">       <span class="keyword">end</span> <span class="keyword">process</span>;</span><br><span class="line"><span class="keyword">End</span>  behav ; </span><br><span class="line"></span><br></pre></td></tr></table></figure></div><h1 id="寄存器的设计"><a href="#寄存器的设计" class="headerlink" title="寄存器的设计"></a>寄存器的设计</h1><p>一个D触发器就是一个寄存器，多位可以由多个D触发器构成</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Entity</span> reg  <span class="keyword">is</span></span><br><span class="line">      <span class="keyword">generic</span>( n: <span class="built_in">natural</span> :=<span class="number">4</span> );                            <span class="comment">--实体类属中的常数</span></span><br><span class="line">        <span class="keyword">port</span> (  D: <span class="keyword">in</span> <span class="built_in">std_logic_vector</span>(n-<span class="number">1</span> <span class="keyword">downto</span> <span class="number">0</span>);</span><br><span class="line">                 clock, reset : <span class="keyword">in</span> <span class="built_in">std_logic</span>;</span><br><span class="line">                 Q: <span class="keyword">out</span> <span class="built_in">std_logic_vector</span> (n-<span class="number">1</span> <span class="keyword">downto</span> <span class="number">0</span>) );</span><br><span class="line"><span class="keyword">End</span> reg ;</span><br><span class="line"><span class="keyword">Architecture</span> behav <span class="keyword">of</span> reg <span class="keyword">is</span></span><br><span class="line"><span class="keyword">Begin</span></span><br><span class="line">     <span class="keyword">process</span>(clock, reset)</span><br><span class="line">     <span class="keyword">begin</span></span><br><span class="line">         <span class="keyword">if</span> (reset=‘<span class="number">0</span>’)  <span class="keyword">then</span> Q&lt;=( <span class="keyword">others</span>=&gt;‘<span class="number">0</span>’);       <span class="comment">--表示Q赋全‘0’  </span></span><br><span class="line">         <span class="keyword">elsif</span> rising_edge(clock) <span class="keyword">then</span> </span><br><span class="line">             Q&lt;=D;</span><br><span class="line">         <span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line">       <span class="keyword">end</span> <span class="keyword">process</span>;</span><br><span class="line"><span class="keyword">End</span>  behav ;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><h2 id="移位寄存器"><a href="#移位寄存器" class="headerlink" title="移位寄存器"></a>移位寄存器</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302151614295.png"                      alt="image.png"                ></p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Entity</span>   sipo <span class="keyword">is</span></span><br><span class="line">       <span class="keyword">generic</span>( n : <span class="built_in">natural</span> :=<span class="number">8</span>);</span><br><span class="line">       <span class="keyword">port</span> ( a : <span class="keyword">in</span> <span class="built_in">std_logic</span> ;</span><br><span class="line">                 q: <span class="keyword">out</span> <span class="built_in">std_logic_vector</span>(n-<span class="number">1</span> <span class="keyword">downto</span> <span class="number">0</span>);</span><br><span class="line">                 clk : <span class="keyword">in</span> <span class="built_in">std_logic</span> );</span><br><span class="line"><span class="keyword">End</span> sipo;</span><br><span class="line"><span class="keyword">Architecture</span> behav <span class="keyword">of</span> sipo <span class="keyword">is</span></span><br><span class="line"><span class="keyword">Begin</span></span><br><span class="line">    <span class="keyword">process</span>(clk)</span><br><span class="line">        <span class="keyword">variable</span> reg : <span class="built_in">std_logic_vector</span>(n-<span class="number">1</span> <span class="keyword">downto</span> <span class="number">0</span>);</span><br><span class="line">     <span class="keyword">begin</span></span><br><span class="line">         <span class="keyword">if</span>  rising_edge(clk)  <span class="keyword">then</span></span><br><span class="line">              reg : = reg ( n-<span class="number">2</span> <span class="keyword">downto</span> <span class="number">0</span>) &amp; a ;   </span><br><span class="line">              <span class="comment">--左移移位寄存器；</span></span><br><span class="line">   <span class="comment">-- reg : = a &amp; reg (n-1 downto 1); 右移移位寄存器 </span></span><br><span class="line">          <span class="keyword">end</span> <span class="keyword">if</span> ;</span><br><span class="line">          q&lt;= reg ;</span><br><span class="line">    <span class="keyword">end</span>  <span class="keyword">process</span>;</span><br><span class="line"><span class="keyword">End</span>  behav;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><h1 id="计数器"><a href="#计数器" class="headerlink" title="计数器"></a>计数器</h1><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302151618066.png"                                     ><br>用“+”函数描述</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Library</span> ieee ;</span><br><span class="line"><span class="keyword">Use</span> ieee.std_logic_1164.<span class="keyword">all</span>;</span><br><span class="line"><span class="keyword">Use</span> ieee.std_logic_unsigned.<span class="keyword">all</span>;</span><br><span class="line"><span class="keyword">Entity</span> counter <span class="keyword">is</span> </span><br><span class="line">     <span class="keyword">generic</span>( n: <span class="built_in">natural</span> :=<span class="number">4</span>);</span><br><span class="line">     <span class="keyword">port</span> ( clk : <span class="keyword">in</span> <span class="built_in">std_logic</span>;</span><br><span class="line">               reset : <span class="keyword">in</span> <span class="built_in">std_logic</span> ;</span><br><span class="line">               count : <span class="keyword">out</span> <span class="built_in">std_logic_vector</span>(n-<span class="number">1</span> <span class="keyword">downto</span> <span class="number">0</span>) );</span><br><span class="line"><span class="keyword">End</span> counter;</span><br><span class="line"><span class="keyword">architecture</span> ripple <span class="keyword">of</span> counter <span class="keyword">is</span> </span><br><span class="line">        <span class="keyword">component</span> T_FF <span class="keyword">is</span> </span><br><span class="line">            <span class="keyword">port</span>( T: <span class="keyword">in</span> <span class="built_in">std_logic</span> ;</span><br><span class="line">                     clk:<span class="keyword">in</span> <span class="built_in">std_logic</span>;</span><br><span class="line">      reset:<span class="keyword">in</span> <span class="built_in">std_logic</span>;</span><br><span class="line">                    Q : <span class="keyword">out</span> <span class="built_in">std_logic</span>;</span><br><span class="line">    Qbar:<span class="keyword">out</span> <span class="built_in">std_logic</span>);</span><br><span class="line">        <span class="keyword">end</span> <span class="keyword">component</span> ;                     <span class="comment">--将前面描述好的T触发器定义为元件；</span></span><br><span class="line">        <span class="keyword">signal</span> carry: <span class="built_in">std_logic_vector</span>( n <span class="keyword">downto</span> <span class="number">0</span>);</span><br><span class="line"><span class="keyword">Begin</span></span><br><span class="line">       carry(<span class="number">0</span>)&lt;=clk;</span><br><span class="line">       g0: <span class="keyword">for</span>  i <span class="keyword">in</span> <span class="number">0</span>  <span class="keyword">to</span> n-<span class="number">1</span>  <span class="keyword">generate</span>      <span class="comment">--循环</span></span><br><span class="line">             T1: T_FF <span class="keyword">port</span> <span class="keyword">map</span> ( ‘<span class="number">1</span>’, carry( i ), reset, count( i ), carry( i+<span class="number">1</span> ) );</span><br><span class="line">        <span class="keyword">end</span> <span class="keyword">generate</span> g0;</span><br><span class="line"><span class="keyword">End</span> ripple ;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302151627535.png"                      alt="image.png"                ></p><p>波形仿真：<br><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302151628781.png"                      alt="image.png"                ></p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302151630092.png"                      alt="image.png"                ></p>]]></content>
      
      
      
        <tags>
            
            <tag> VHDL 学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VHDL第三章组合逻辑电路</title>
      <link href="/2023/02/15/VHDL%E7%AC%AC%E4%B8%89%E7%AB%A0%E7%BB%84%E5%90%88%E9%80%BB%E8%BE%91%E7%94%B5%E8%B7%AF/"/>
      <url>/2023/02/15/VHDL%E7%AC%AC%E4%B8%89%E7%AB%A0%E7%BB%84%E5%90%88%E9%80%BB%E8%BE%91%E7%94%B5%E8%B7%AF/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>数字电路按照完成逻辑功能的不同特点，</p><blockquote><pre><code>组合逻辑电路 </code></pre><p>任意时刻的输出仅仅取决于该时刻的输入，与电路原来的状态无关<br>            电路没有记忆功能<br>            电路结构上不存在反馈路径  </p></blockquote><p>常见的有简单门电路，选择器，译码器，三态门</p><blockquote><pre><code>时序逻辑电路</code></pre><p>任意时刻的输出不仅取决于当时的输入信号，而且还取决于电路原来的状态，或者说，还与以前的输入有关。</p></blockquote><h1 id="设计方法"><a href="#设计方法" class="headerlink" title="设计方法"></a>设计方法</h1><p>使用可编程逻辑器件，用硬件语言描述的EDA设计方法<br>（1）逻辑问题的描述。将设计问题转化为一个逻辑问题<br>（2）根据逻辑问题，用硬件描述语言进行描述<br>（3）对描述进行综合，仿真测试<br>（4）生成最终网表，下载到芯片</p><h1 id="描述方法"><a href="#描述方法" class="headerlink" title="描述方法"></a>描述方法</h1><ul><li>数据流描述： 并行语句</li><li>结构 ：组件和互连</li><li>行为(时序)：顺序语句<ul><li>寄存器 状态机 指令解码</li></ul></li></ul><p>VHDL 数据流设计风格可以变成 VHDL 代码，反之不可行</p><ul><li>并行信号赋值（&lt;&#x3D;)</li><li>条件并行信号赋值（when -else)</li><li>选择并行信号赋值（with-select-when）</li><li>for generate</li></ul><p>注意优先级 <code>y &lt;= (a and b) or (c and d) ;</code><br>同一个信号不能出现在并行赋值语句的两边 也就是&lt;&#x3D;</p><h1 id="门电路"><a href="#门电路" class="headerlink" title="门电路"></a>门电路</h1><p>四种基本操作：与，或，非，，触发器操作，<br>以与非门为例</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span> ieee;</span><br><span class="line"><span class="keyword">use</span> ieee.std_logic_1164.<span class="keyword">all</span>;</span><br><span class="line"><span class="keyword">entity</span> nand2 <span class="keyword">is</span></span><br><span class="line"><span class="keyword">port</span> (a,b: <span class="keyword">in</span> <span class="built_in">std_logic</span>;</span><br><span class="line">y: <span class="keyword">out</span> <span class="built_in">std_logic</span>);</span><br><span class="line"><span class="keyword">end</span> nand2;</span><br><span class="line"><span class="keyword">architecture</span> behav <span class="keyword">of</span> nand2 <span class="keyword">is</span></span><br><span class="line"><span class="keyword">begin</span> </span><br><span class="line">y &lt;= a <span class="keyword">nand</span> b;</span><br><span class="line"><span class="keyword">end</span> behav;</span><br><span class="line"><span class="comment">-- 如果吧nand变为nor就是或非</span></span><br></pre></td></tr></table></figure></div><h1 id="译码器"><a href="#译码器" class="headerlink" title="译码器"></a>译码器</h1><p>输入为二进制代码，输出是一组高低电平信号<br>变量<del>码制变换</del>显示译码~ 地址译码~</p><p>以3-8译码器为例<br>3个输入端 abc,。 g1,g2a,g2b为选择信号当g1 &#x3D;’1’, ‘0’’0’为例，正常工作</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span> ieee;</span><br><span class="line"><span class="keyword">use</span> ieee.std_logic_1164.<span class="keyword">all</span>;</span><br><span class="line"><span class="keyword">entity</span> decoder <span class="keyword">is</span></span><br><span class="line"><span class="keyword">port</span> (a,b,c,g1,g2a,g2b: <span class="keyword">in</span> <span class="built_in">std_logic</span>;</span><br><span class="line">y: <span class="keyword">out</span> <span class="built_in">std_logic_vector</span>(<span class="number">7</span> <span class="keyword">downto</span> <span class="number">0</span>);</span><br><span class="line"><span class="keyword">end</span> decoder;</span><br><span class="line"><span class="keyword">architecture</span> behav <span class="keyword">of</span> decoder <span class="keyword">is</span></span><br><span class="line"><span class="keyword">signal</span> indata: <span class="built_in">std_logic_vector</span>(<span class="number">2</span> <span class="keyword">downto</span> <span class="number">0</span>);</span><br><span class="line"><span class="keyword">begin</span> </span><br><span class="line">indata &lt;= c&amp;b&amp;a;</span><br><span class="line"><span class="keyword">process</span>(indata,g1,g2a,g2b)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">if</span> (g1=<span class="string">&#x27;1&#x27;</span> <span class="keyword">and</span> g2a = <span class="string">&#x27;0&#x27;</span><span class="keyword">and</span> g2b = <span class="string">&#x27;0&#x27;</span>) <span class="keyword">then</span></span><br><span class="line"><span class="keyword">case</span> indata <span class="keyword">is</span> </span><br><span class="line"><span class="keyword">when</span> <span class="string">&quot;000&quot;</span> =&gt; y &lt;=<span class="string">&quot;11111110&quot;</span>;</span><br><span class="line"><span class="keyword">when</span> /....</span><br><span class="line">....</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">case</span>;</span><br><span class="line"><span class="keyword">else</span> y&lt;= <span class="string">&quot;11111111&quot;</span>;</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">process</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span> behav;</span><br></pre></td></tr></table></figure></div><h1 id="编码器"><a href="#编码器" class="headerlink" title="编码器"></a>编码器</h1><p>它的输入是一组高低电平信号，输出是一组二进制代码<br>优先级编码器<br>74ls148<br>3位二进制码输出的优先级编码<br>当有多个输入时，有优先级</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Library</span> IEEE;</span><br><span class="line"><span class="keyword">Use</span> IEEE.std_logic_1164.<span class="keyword">all</span>;</span><br><span class="line"><span class="keyword">Entity</span> priorityencoder  <span class="keyword">is</span></span><br><span class="line">    <span class="keyword">Port</span> ( input : <span class="keyword">in</span> <span class="built_in">std_logic_vector</span> (<span class="number">7</span> <span class="keyword">downto</span> <span class="number">0</span> );</span><br><span class="line">              y: <span class="keyword">out</span> <span class="built_in">std_logic_vector</span>( <span class="number">2</span> <span class="keyword">downto</span> <span class="number">0</span>) );</span><br><span class="line"><span class="keyword">End</span> priorityencoder;</span><br><span class="line"><span class="keyword">Architecture</span> behav <span class="keyword">of</span>  priorityencoder <span class="keyword">is</span></span><br><span class="line"><span class="keyword">Begin</span></span><br><span class="line">      <span class="keyword">Process</span>(input)</span><br><span class="line">      <span class="keyword">Begin</span></span><br><span class="line">      <span class="keyword">If</span> ( input(<span class="number">0</span>)=‘<span class="number">0</span>’) <span class="keyword">then</span>    y&lt;=“<span class="number">111</span>”;</span><br><span class="line">          <span class="keyword">elsif</span>  ( input(<span class="number">1</span>)=‘<span class="number">0</span>’) <span class="keyword">then</span>  y&lt;=“<span class="number">110</span>”;</span><br><span class="line">          <span class="keyword">elsif</span>  ( input(<span class="number">2</span>)=‘<span class="number">0</span>’) <span class="keyword">then</span>  y&lt;=“<span class="number">101</span>”;</span><br><span class="line">          <span class="keyword">elsif</span>  ( input(<span class="number">3</span>)=‘<span class="number">0</span>’) <span class="keyword">then</span>  y&lt;=“<span class="number">100</span>”;</span><br><span class="line">          <span class="keyword">elsif</span>  ( input(<span class="number">4</span>)=‘<span class="number">0</span>’) <span class="keyword">then</span>  y&lt;=“<span class="number">011</span>”;</span><br><span class="line">          <span class="keyword">elsif</span>  ( input(<span class="number">5</span>)=‘<span class="number">0</span>’) <span class="keyword">then</span>  y&lt;=“<span class="number">010</span>”;</span><br><span class="line">          <span class="keyword">elsif</span>  ( input(<span class="number">6</span>)=‘<span class="number">0</span>’) <span class="keyword">then</span>  y&lt;=“<span class="number">001</span>”;</span><br><span class="line">          <span class="keyword">elsif</span>  ( input(<span class="number">7</span>)=‘<span class="number">0</span>’) <span class="keyword">then</span>  y&lt;=“<span class="number">000</span>”;</span><br><span class="line">          <span class="keyword">else</span> y&lt;=“XXX”;</span><br><span class="line">          <span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">process</span>;</span><br><span class="line"><span class="keyword">End</span> behav;</span><br></pre></td></tr></table></figure></div><p>#值得一看</p><h1 id="加法器"><a href="#加法器" class="headerlink" title="加法器"></a>加法器</h1><p>半加 全加（有进位）<br>前者两个输入，两个输出<br>后者三个输入，两个输出</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LIBRARY</span> ieee;</span><br><span class="line"><span class="keyword">USE</span> ieee.std_logic_1164.<span class="keyword">all</span>;</span><br><span class="line"><span class="keyword">ENTITY</span> full_add <span class="keyword">IS</span></span><br><span class="line"><span class="keyword">PORT</span> ( X,Y,Z:<span class="keyword">in</span> <span class="built_in">bit</span>;</span><br><span class="line">Sum,Carry:<span class="keyword">out</span> <span class="built_in">bit</span>);</span><br><span class="line"><span class="keyword">END</span> full_add;</span><br><span class="line"></span><br><span class="line"><span class="keyword">ARCHITECTURE</span> a <span class="keyword">OF</span> full_add <span class="keyword">IS</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">   Sum &lt;= X <span class="keyword">xor</span> Y <span class="keyword">xor</span> Z;</span><br><span class="line">   Carry&lt;=(X <span class="keyword">and</span> Y) <span class="keyword">or</span> (Y <span class="keyword">and</span> Z) <span class="keyword">or</span> (Z <span class="keyword">and</span> X);</span><br><span class="line"><span class="keyword">END</span> a; </span><br><span class="line"><span class="comment">-- 对于这些操作可以看真值表</span></span><br></pre></td></tr></table></figure></div><p>#模块化处理</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span> ieee;</span><br><span class="line"><span class="keyword">use</span> ieee.std_logic_1164.<span class="keyword">all</span></span><br><span class="line"><span class="keyword">package</span> components <span class="keyword">is</span></span><br><span class="line">COMPONENTS fadd <span class="keyword">is</span></span><br><span class="line"><span class="keyword">port</span>(a,b,ci: <span class="keyword">in</span> <span class="built_in">std_logic</span>;</span><br><span class="line">co,sum:<span class="keyword">out</span> <span class="built_in">std_logic</span>);</span><br><span class="line"><span class="keyword">end</span> fadd;</span><br><span class="line"><span class="keyword">end</span> components;</span><br></pre></td></tr></table></figure></div><h1 id="三态门"><a href="#三态门" class="headerlink" title="三态门"></a>三态门</h1><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Library</span> IEEE;</span><br><span class="line"><span class="keyword">Use</span> IEEE.std_logic_1164.<span class="keyword">all</span>;</span><br><span class="line"><span class="keyword">Entity</span> tri_gate <span class="keyword">is</span></span><br><span class="line">    <span class="keyword">port</span> ( din , en : <span class="keyword">in</span> <span class="built_in">std_logic</span>;</span><br><span class="line">              dout : <span class="keyword">out</span> <span class="built_in">std_logic</span> );</span><br><span class="line"><span class="keyword">End</span> tri_gate ;</span><br><span class="line"><span class="keyword">Architecture</span> behav <span class="keyword">of</span> tri_gate  <span class="keyword">is</span></span><br><span class="line"><span class="keyword">Begin</span></span><br><span class="line">      <span class="keyword">process</span> ( din ,en)</span><br><span class="line">      <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">if</span> (en=‘<span class="number">1</span>’) <span class="keyword">then</span> dout&lt;=din;</span><br><span class="line">            <span class="keyword">else</span> dout&lt;=‘Z’;</span><br><span class="line">            <span class="keyword">end</span> <span class="keyword">if</span> ;</span><br><span class="line">       <span class="keyword">end</span> <span class="keyword">process</span>; </span><br><span class="line"><span class="keyword">End</span> behav;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><h1 id="缓冲器"><a href="#缓冲器" class="headerlink" title="缓冲器"></a>缓冲器</h1><p>缓冲寄存器，在总线传输中起<strong>数据暂存缓冲</strong><br>输入缓冲，输出缓冲<br>单向与双向之分</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Library</span> IEEE;</span><br><span class="line"><span class="keyword">Use</span> IEEE.std_logic_1164.<span class="keyword">all</span>;</span><br><span class="line"><span class="keyword">Entity</span> tri_bigate  <span class="keyword">is</span></span><br><span class="line">    <span class="keyword">port</span> ( a , b: <span class="keyword">inout</span>  <span class="built_in">std_logic_vector</span>(<span class="number">7</span> <span class="keyword">downto</span> <span class="number">0</span>) ;</span><br><span class="line">              en , dr : <span class="keyword">in</span> <span class="built_in">std_logic</span> );</span><br><span class="line"><span class="keyword">End</span> tri_bigate ;</span><br><span class="line"><span class="keyword">Architecture</span> behav <span class="keyword">of</span> tri_bigate  <span class="keyword">is</span></span><br><span class="line">     <span class="keyword">signal</span> aout , bout :<span class="built_in">std_logic_vector</span> ( <span class="number">7</span> <span class="keyword">downto</span> <span class="number">0</span> );</span><br><span class="line"><span class="keyword">Begin</span></span><br><span class="line">      <span class="keyword">process</span> ( a , dr , en)</span><br><span class="line">      <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">if</span> ( (en=‘<span class="number">0</span>’) <span class="keyword">and</span> ( dr=‘<span class="number">1</span>’) )   <span class="keyword">then</span></span><br><span class="line">                   bout&lt;=a;</span><br><span class="line">            <span class="keyword">else</span> bout&lt;=“ZZZZZZZZ”;</span><br><span class="line">            <span class="keyword">end</span> <span class="keyword">if</span> ;</span><br><span class="line">            b&lt;=bout ;</span><br><span class="line">       <span class="keyword">end</span> <span class="keyword">process</span>;</span><br><span class="line">     <span class="keyword">process</span> ( b , dr , en)</span><br><span class="line">      <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">if</span> ( (en=‘<span class="number">0</span>’) <span class="keyword">and</span> ( dr=‘<span class="number">0</span>’) )   <span class="keyword">then</span></span><br><span class="line">                   aout&lt;=b;</span><br><span class="line">            <span class="keyword">else</span> </span><br><span class="line">                   aout&lt;=“ZZZZZZZZ”;</span><br><span class="line">            <span class="keyword">end</span> <span class="keyword">if</span> ;</span><br><span class="line">            a&lt;=aout ;</span><br><span class="line">       <span class="keyword">end</span> <span class="keyword">process</span>; </span><br><span class="line"><span class="keyword">End</span> behav;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></div>]]></content>
      
      
      
        <tags>
            
            <tag> VHDL 学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VHDL第二章语法基础</title>
      <link href="/2023/02/15/VHDL%E7%AC%AC%E4%BA%8C%E7%AB%A0%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/"/>
      <url>/2023/02/15/VHDL%E7%AC%AC%E4%BA%8C%E7%AB%A0%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Very-High-Speed Integrated circuit Hardware Description  Language</p><p>用途</p><blockquote><p>主要用于描述字系统的结构、行为、功能和接口<br>VHDL侧重于系统描述，更适合系统级设计</p></blockquote><hr><p>具有 硬件特征，并且是并行执行方式</p><h1 id="基本结构"><a href="#基本结构" class="headerlink" title="基本结构"></a><font color = Pink>基本结构</font></h1><ul><li>库的调用       ——相当于操作系统中的目录</li><li>程序包的调用 —— 类似于include</li><li>实体说明—— 用于说明设计系统的外部接口信息</li><li>结构体 —— 描述行为</li></ul><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302121138527.png"                                     ></p><h1 id="VHDL的主要构件"><a href="#VHDL的主要构件" class="headerlink" title="VHDL的主要构件"></a>VHDL的主要构件</h1><ul><li><strong>基本构件</strong>：库、包、配置、实体、结构体、块、子程序（函数以及过程）</li><li><strong>主要构件</strong>：库 程序包 实体 结构体<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span> (hello)</span><br></pre></td></tr></table></figure></div></li></ul><h2 id="库："><a href="#库：" class="headerlink" title="库："></a>库：</h2><blockquote><p> <code>LIBRARY +　库名</code><br> 库(Library)是编译后数据的集合，是存放预先完成的程序包和数据集合体的仓库。<br> 　std库 IEEE库，work库（默认库）。面向asic的库，哈hi有自定义的库</p></blockquote><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LIBRARY</span> IEEE;</span><br><span class="line"><span class="keyword">USE</span> IEEE.std_logic_1164.<span class="keyword">ALL</span>;;</span><br><span class="line"><span class="keyword">USE</span> IEEE.std_logic_unsigned.<span class="keyword">ALL</span>;</span><br></pre></td></tr></table></figure></div><p>一般使用的是IEEE库，有四个常用的程序包</p><ol><li>std_logic_1164</li><li>std_logic_arith</li><li>std_logic_signed </li><li>std_logic_unsigned<br><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202302121155541.png"                      alt="image.png"                ></li></ol><h2 id="包"><a href="#包" class="headerlink" title="包"></a>包</h2><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">USE</span> IEEE.STD_LOGIC_1164.<span class="keyword">ALL</span></span><br></pre></td></tr></table></figure></div><p>不同的包，一样的语句会产生不同的形式的结果</p><h2 id="实体"><a href="#实体" class="headerlink" title="实体"></a>实体</h2><p>包括实体名，类属参数说明，端口说明<br>由”ENTITY” 引导</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ENTITY</span> 实体名 <span class="keyword">IS</span></span><br><span class="line">[类属参数说明]；</span><br><span class="line">[端口说明]；</span><br><span class="line"><span class="keyword">END</span> [<span class="keyword">ENTITY</span>] [实体名]；</span><br></pre></td></tr></table></figure></div><p>以END  ENTITY 结尾</p><ol><li>类属参数说明 说明静态信息<br>&#96;GENERIC (常数名：数据类型: &#x3D;设定值)<div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GENERIC</span>(m:<span class="built_in">time</span>:= <span class="number">1</span>ns);</span><br></pre></td></tr></table></figure></div></li><li>端口说明<br>提供外部接口信息<br><code>PORT (端口名：端口方向 数据类型）</code><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">PORT</span>(d0:<span class="keyword">IN</span> <span class="built_in">std_logic</span>)</span><br></pre></td></tr></table></figure></div></li></ol><p>例子<br><img                       lazyload                     src="/images/loading.svg"                     data-src="https://raw.githubusercontent.com/h-yy-bag/hexo_imgs/main/imgs/202302121210874.png"                      alt="image.png"                ></p><h2 id="结构体"><a href="#结构体" class="headerlink" title="结构体"></a>结构体</h2><p>ARCHITECTURE 设计实体的具体描述，指明具体行为，两部分  <strong>定义说明</strong>和<strong>具体功能描述</strong></p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ARCHITECTURE</span> 结构体 <span class="keyword">OF</span> 实体名 <span class="keyword">IS</span></span><br><span class="line">[定义语句] 信号 (<span class="keyword">signal</span>);</span><br><span class="line">常数 (<span class="keyword">constant</span>);</span><br><span class="line">数据类型(<span class="keyword">type</span>);</span><br><span class="line">函数(<span class="keyword">function</span>);</span><br><span class="line">原件(<span class="keyword">component</span>);</span><br><span class="line"><span class="keyword">BEGIN</span> </span><br><span class="line">[并行处理语句]；</span><br><span class="line"><span class="keyword">END</span>  结构体名；</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><p>语句并行<br>结构体的描述方法：<br><font color=pink size =4> 行为描述、数据流描述、结构描述</font><br><img                       lazyload                     src="/images/loading.svg"                     data-src="https://raw.githubusercontent.com/h-yy-bag/hexo_imgs/main/imgs/202302121242674.png"                      alt="image.png"                ></p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>描述层与层之间的连接关系和实体和结构体之间的连接关系</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CONFIGURATION</span> 配置名 <span class="keyword">OF</span> 实体名 <span class="keyword">IS</span></span><br><span class="line">[语句说明];</span><br><span class="line"><span class="keyword">END</span> 配置名;</span><br></pre></td></tr></table></figure></div><p>作用：<br>利用配置语句来选择不同的结构体</p><h1 id="数据类型以及运算符"><a href="#数据类型以及运算符" class="headerlink" title="数据类型以及运算符"></a>数据类型以及运算符</h1><h2 id="10种标准数据类型"><a href="#10种标准数据类型" class="headerlink" title="10种标准数据类型"></a><strong>10种标准数据类型</strong></h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://raw.githubusercontent.com/h-yy-bag/hexo_imgs/main/imgs/202302121251679.png"                      alt="image.png"                ><br>还有用途<br><img                       lazyload                     src="/images/loading.svg"                     data-src="https://raw.githubusercontent.com/h-yy-bag/hexo_imgs/main/imgs/202302121252475.png"                      alt="image.png"                ></p><p>还由用户自定义的数据类型</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">TYPE</span> 数据类型名 <span class="keyword">IS</span> 数据类型定义 <span class="keyword">OF</span> 基本数据类型</span><br><span class="line"></span><br><span class="line">或 <span class="keyword">TYPE</span> 数据类型名 <span class="keyword">IS</span> 数据类型定义</span><br></pre></td></tr></table></figure></div><p>常用的有 枚举类型， 子类型 整数类型和实数类型</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">TYPE</span> week <span class="keyword">IS</span> (sum, mon, tue, wed, thu, tri, sat); <span class="comment">--枚举类型</span></span><br></pre></td></tr></table></figure></div><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SUBTYPE</span> <span class="built_in">natural</span> <span class="keyword">IS</span> <span class="built_in">integer</span> <span class="keyword">range</span> <span class="number">0</span> <span class="keyword">to</span> <span class="built_in">integer</span>’high</span><br><span class="line"><span class="comment">--子类型</span></span><br></pre></td></tr></table></figure></div><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">TYPE</span> percent <span class="keyword">IS</span> <span class="built_in">INTEGER</span> <span class="keyword">RANGE</span> -<span class="number">100</span> <span class="keyword">TO</span> <span class="number">100</span></span><br><span class="line"><span class="comment">-- 整数类型和实数类型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">TYPE</span> 数组名 <span class="keyword">IS</span> <span class="keyword">ARRAY</span>(数组范围) <span class="keyword">OF</span> 数组类型；</span><br><span class="line">数组类型</span><br><span class="line"></span><br><span class="line"><span class="keyword">TYPE</span> 记录类型名 <span class="keyword">IS</span> <span class="keyword">RECORD</span> </span><br><span class="line">元素名：元素数据类型；</span><br><span class="line">元素名: 元素数据类型：</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">RECORD</span>;</span><br><span class="line"><span class="comment">-- 记录类型</span></span><br></pre></td></tr></table></figure></div><hr><h2 id="数据类型转换"><a href="#数据类型转换" class="headerlink" title="数据类型转换"></a>数据类型转换</h2><p>std_logic_1164:</p><ul><li>TO_STDLOGICVECTOR(A) –&gt; 由 BIT_VECTOR 转换为<br>STD_LOGIC_VECTOR</li><li>TO_BITVECTOR(A) –&gt;BIT转到bitvector()</li><li>TO_STDLOGIC(A)  –&gt;由BIT转 换STD_LOGIC</li><li>TOBIT(A)</li></ul><p>std_logic_arich:</p><ul><li>CONV_STD_LOGIC_VECTOR(A,n)(n为位长)  integer unsigned signed 转换为std_logic_vector</li><li>CONV_INTEGER(A)  unsigned signed 转换为integer</li></ul><p>std_logic_unsigned:</p><ul><li>conv_integer(A)   ,std_logic_vector转换为integer</li></ul><h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://raw.githubusercontent.com/h-yy-bag/hexo_imgs/main/imgs/202302121556646.png"                      alt="image.png"                ></p><h1 id="数据对象"><a href="#数据对象" class="headerlink" title="数据对象"></a>数据对象</h1><p>可以赋值的都叫做 对象</p><ol><li>常量：设计中不变的值  </li><li>变量 ： 定义在进程中或子程序种的变化量</li><li>对应硬件内部实实在在的连线</li></ol><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CONSTANT</span> 常数名：数据类型：=表达式 </span><br><span class="line"></span><br><span class="line"><span class="keyword">CONSTANT</span> fbus:<span class="built_in">bit_vector</span>:=“<span class="number">0101</span>”</span><br><span class="line"></span><br><span class="line"><span class="comment">--总线上的数据向量</span></span><br></pre></td></tr></table></figure></div><p>全局的量</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">VARIABLE</span> 变量名：数据类型:= 初始值</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">VARIABLE</span> <span class="built_in">time</span>:<span class="built_in">integer</span> <span class="keyword">RANGE</span> <span class="number">0</span> <span class="keyword">TO</span> <span class="number">6</span> <span class="comment">--进程中代表次数的变化</span></span><br></pre></td></tr></table></figure></div><p>局部量<br>对变量的赋值是立即生效的</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SIGNAL</span> 信号名:数据类型:=表达式</span><br></pre></td></tr></table></figure></div><p>“:&#x3D;”表示对信号的赋初值，一般不产生延时。<br>“&lt;&#x3D;”表示信号的代入赋值，有延时。<br><img                       lazyload                     src="/images/loading.svg"                     data-src="https://raw.githubusercontent.com/h-yy-bag/hexo_imgs/main/imgs/202302121625968.png"                      alt="image.png"                ></p><blockquote><p>信号赋值有延迟；而变量赋值没有延迟。</p><p>进程对信号敏感，对变量不敏感。信号可以是多个进程的全局信<br>号, 而变量只在定义它的进程中可见</p><p>在描述中，信号的赋值不会立即生效，而是要等待一个delta延迟后才会变化，否则该信号的值在delta延迟之前仍是原来的值。</p></blockquote><p>变量存储临时数据 保存中间结果(：&#x3D; ）赋值立即发生，进程内有效<br>常量用于保存静态数据<br>信号有延时（&lt;&#x3D;) 跨进程</p><h1 id="基本语句"><a href="#基本语句" class="headerlink" title="基本语句"></a>基本语句</h1><p>具有顺序和并行语句（特点<br>顺序语句需要用process进行封装<br>“–”表示注释</p><h2 id="并行语句"><a href="#并行语句" class="headerlink" title="并行语句"></a>并行语句</h2><p>包括7种语句</p><ol><li>赋值语句</li><li>条件赋值语句、</li><li>选择信号赋值语句、</li><li>进程语句</li><li>元件例化语句</li><li>生成语句</li><li>子程序调用语句</li></ol><h3 id="赋值语句"><a href="#赋值语句" class="headerlink" title="赋值语句"></a>赋值语句</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://raw.githubusercontent.com/h-yy-bag/hexo_imgs/main/imgs/202302121634515.png"                      alt="image.png"                ></p><p>信号  &lt;&#x3D;<br>变量和常量 :&#x3D;</p><h3 id="条件赋值语句"><a href="#条件赋值语句" class="headerlink" title="条件赋值语句"></a>条件赋值语句</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://raw.githubusercontent.com/h-yy-bag/hexo_imgs/main/imgs/202302121637768.png"                      alt="image.png"                ><br>a &lt;&#x3D; 表达式1 when 条件 else<br>        表达式2 when 条件 else<br>        …<br>        表达式n；</p><p><strong>只有最后一句需要分号</strong></p><h3 id="选择信号赋值"><a href="#选择信号赋值" class="headerlink" title="选择信号赋值"></a>选择信号赋值</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://raw.githubusercontent.com/h-yy-bag/hexo_imgs/main/imgs/202302121641926.png"                      alt="image.png"                ><br>逗号和分号的作用情况<br>with instrution select<br>a &lt;&#x3D; b when  “100”,<br>…<br>‘Z’ when others;</p><h3 id="进程语句"><a href="#进程语句" class="headerlink" title="进程语句"></a>进程语句</h3><p>process本身就是一个并行语句，内部是顺序语句<br><img                       lazyload                     src="/images/loading.svg"                     data-src="https://raw.githubusercontent.com/h-yy-bag/hexo_imgs/main/imgs/202302121646948.png"                      alt="image.png"                ><br>    启动方式有两种：敏感参数以及wait语句</p><p>敏感参数： process(参数)  只要参数一变化，process就会启动</p><p>wait语句：<br>process<br>begin<br>    output &lt;&#x3D; in1 OR in2;<br>    wait on in1,in2;<br>END PROCESS;</p><p>等待in1, in2信号发生变化，进程再次执行</p><blockquote><p><strong>进程的启动只能是信号</strong><br>敏感参数以及wait 语句不能混用<br>当一个进程执行结束后，先挂起来，直到有新的启动信号变化为止</p></blockquote><h3 id="元件例化语句"><a href="#元件例化语句" class="headerlink" title="元件例化语句"></a>元件例化语句</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://raw.githubusercontent.com/h-yy-bag/hexo_imgs/main/imgs/202302121656792.png"                      alt="image.png"                ><br><img                       lazyload                     src="/images/loading.svg"                     data-src="https://raw.githubusercontent.com/h-yy-bag/hexo_imgs/main/imgs/202302121702400.png"                      alt="image.png"                ></p><h3 id="生成语句"><a href="#生成语句" class="headerlink" title="生成语句"></a>生成语句</h3><p>有IF 和FOR来控制的<br><img                       lazyload                     src="/images/loading.svg"                     data-src="https://raw.githubusercontent.com/h-yy-bag/hexo_imgs/main/imgs/202302121704257.png"                      alt="image.png"                ></p><h3 id="子程序调用语句"><a href="#子程序调用语句" class="headerlink" title="子程序调用语句"></a>子程序调用语句</h3><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://raw.githubusercontent.com/h-yy-bag/hexo_imgs/main/imgs/202302121706519.png"                      alt="image.png"                ><br>子程序调用 ：过程调用语句和函数调用</p><h2 id="顺序语句"><a href="#顺序语句" class="headerlink" title="顺序语句"></a>顺序语句</h2><ol><li><p>IF语句  可以和 when else 互换</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">IF</span> reset=‘<span class="number">0</span>’ <span class="keyword">THEN</span> q&lt;=‘<span class="number">0</span>’;</span><br><span class="line"><span class="keyword">ELSIF</span> ‘clk’ event <span class="keyword">AND</span> clk=‘<span class="number">1</span>’ <span class="keyword">THEN</span> q&lt;=d; </span><br><span class="line"><span class="keyword">END</span> <span class="keyword">IF</span>;</span><br></pre></td></tr></table></figure></div></li><li><p>CASE语句  可以和 with else语句互换</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CASE</span> sel <span class="keyword">IS</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">0</span>=&gt; y&lt;=d0；</span><br><span class="line"></span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">1</span>=&gt; y&lt;=d1；</span><br><span class="line"></span><br><span class="line"><span class="keyword">WHEN</span> <span class="keyword">OTHERS</span>&lt;=<span class="keyword">NULL</span>;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">CASE</span></span><br></pre></td></tr></table></figure></div></li><li><p>LOOP语句</p></li><li><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://raw.githubusercontent.com/h-yy-bag/hexo_imgs/main/imgs/202302121715226.png"                      alt="image.png"                ></p></li><li><p>EXIT 和 NEXT语句（loop内部的循环控制语句）</p></li></ol><p>其他顺序语句</p><blockquote><p>wait语句<br>wait on 信号表<br>wait until 条件表达式<br>wait for 时间表达式</p></blockquote><blockquote><p>返回语句RETURN<br>仅用于子程序</p></blockquote><blockquote><p>空操作语句NULL<br>常用于CASE语句中</p></blockquote><h1 id="属性描述语句"><a href="#属性描述语句" class="headerlink" title="属性描述语句"></a>属性描述语句</h1><p>具有属性的项目有很多： 类型，子类型，过程，函数，信号，变量，常量，实体，结构体，配置，程序包，元件和语句标号等，属性是这些项目的特性</p><p><strong>预定义描述语句格式：属性对象’属性名</strong></p><h2 id="1-信号类属性"><a href="#1-信号类属性" class="headerlink" title="1.信号类属性"></a>1.信号类属性</h2><p>EVENT表示信号发生率动作，stable表示无事件发生</p><div class="highlight-container" data-rel="Vhdl"><figure class="iseeu highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">NOT</span> clock`STABLE <span class="keyword">AND</span> clock = <span class="string">&#x27;1&#x27;</span>; <span class="comment">--检测时钟上升沿</span></span><br><span class="line"></span><br><span class="line">clock`EVENT <span class="keyword">AND</span> clock=<span class="string">&#x27;1&#x27;</span>; <span class="comment">--检测时钟上升沿</span></span><br><span class="line">还有 s`delayed(<span class="built_in">time</span>)</span><br><span class="line">s<span class="symbol">&#x27;stable</span></span><br><span class="line">s<span class="symbol">&#x27;quiet</span>(<span class="built_in">time</span>)</span><br></pre></td></tr></table></figure></div><h2 id="2-数值区间类属性"><a href="#2-数值区间类属性" class="headerlink" title="2. 数值区间类属性"></a>2. 数值区间类属性</h2><p><strong>RANGE</strong>和<strong>REVERSE_RANGE</strong></p><h2 id="3-数值类属性"><a href="#3-数值类属性" class="headerlink" title="3. 数值类属性"></a>3. 数值类属性</h2><pre><code>.LEFT  &#39;RIGHT HIGH LOW之类</code></pre><h2 id="4-数组属性"><a href="#4-数组属性" class="headerlink" title="4. 数组属性"></a>4. 数组属性</h2><p>’LENGTH 对宽度进行获取</p><h2 id="5-用户自定义的属性"><a href="#5-用户自定义的属性" class="headerlink" title="5. 用户自定义的属性"></a>5. 用户自定义的属性</h2><p>ATTRIBUTE 属性名 OF 对象名：对象类型 IS 值</p><h1 id="其他构建"><a href="#其他构建" class="headerlink" title="其他构建"></a>其他构建</h1><ol><li><p>块是一种划分 ，不影响综合，将模块划分为数个区域</p></li><li><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://raw.githubusercontent.com/h-yy-bag/hexo_imgs/main/imgs/202302122018627.png"                      alt="image.png"                ></p></li><li><p>函数</p></li><li><p>&#96;&#96;&#96;</p></li></ol><p>  FUNCTION 函数名（参数表）RETURN 数据类型；<br>  FUNCTION 函数名（参数表）RETURN 数据类型 IS<br>  [说明部分]；<br>  [说明部分]；<br>  BEGIN<br>  顺序语句；<br>  END 函数名；</p><p>  &#96;&#96;&#96;</p><ol start="4"><li>过程<blockquote><p>PROCEDURE 和函数一样 两部分组成 过程首和过程体<br><img                       lazyload                     src="/images/loading.svg"                     data-src="https://raw.githubusercontent.com/h-yy-bag/hexo_imgs/main/imgs/202302122018715.png"                      alt="image.png"                ></p></blockquote></li></ol><blockquote><p>函数和过程都是顺序语句，并且不能说明信号<br>过程参数表一般要定义参量的流向模式，如果没有指定默认为IN<br>过程中可以有WAIT语句（但综合器一般不支持），函数中能<br>过程有多个返回值，函数只有一个</p></blockquote><p>还有<strong>程序包</strong><br><img                       lazyload                     src="/images/loading.svg"                     data-src="https://raw.githubusercontent.com/h-yy-bag/hexo_imgs/main/imgs/202302122021452.png"                      alt="image.png"                ><br>示例：<br><img                       lazyload                     src="/images/loading.svg"                     data-src="https://raw.githubusercontent.com/h-yy-bag/hexo_imgs/main/imgs/202302122022315.png"                      alt="image.png"                ></p><p>还有TEXTIO构件</p>]]></content>
      
      
      
        <tags>
            
            <tag> VHDL 学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>通原笔记_1（1至2章）</title>
      <link href="/2023/01/24/%E9%80%9A%E5%8E%9F%E7%AC%94%E8%AE%B0-1/"/>
      <url>/2023/01/24/%E9%80%9A%E5%8E%9F%E7%AC%94%E8%AE%B0-1/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>​最近愈发觉得在蹉跎时间，也稍微把游戏放一放，现在更能感受到人的“温度”，而不是打完游戏之后的一身虚无以及疲惫、无知。</p><p>选择<a class="link"   href="https://www.bilibili.com/video/BV1nE411E79G" >西安电子科技大学通信原理<i class="fa-solid fa-up-right-from-square"></i></a>观看，也把之前很多不懂的地方重新认识了一遍，借此文来记录笔记。</p><p><strong>第一章</strong></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301242349288.jpg"                      alt="CRall_20230124_153838990"                ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301242351621.jpg"                      alt="CRall_20230124_153849867"                ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301242352676.jpg"                      alt="CRall_20230124_153911365"                ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301242353578.jpg"                      alt="CRall_20230124_153920542"                ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301242354211.jpg"                      alt="CRall_20230124_153932721"                ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301242354575.jpg"                      alt="CRall_20230124_153942022"                ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301242355731.jpg"                      alt="CRall_20230124_153950281"                ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301242357435.jpg"                      alt="CRall_20230124_153959523"                ></p>]]></content>
      
      
      
        <tags>
            
            <tag> 通信原理 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初晴</title>
      <link href="/2023/01/14/%E5%88%9D%E6%99%B4/"/>
      <url>/2023/01/14/%E5%88%9D%E6%99%B4/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>​      下了两天的小雨，地上，墙上都是湿漉漉的，没想到下午的开始放晴了。雨后初晴，天实在是很干净。就好像在一块蓝色的幕布上撒下了这些云彩一般，望向天空，注意力很难不被这些”小可爱”所吸引，看着它，仿佛有摄人心魄的能力，仿佛心也随之飘荡在蓝天之上没一下子就开阔起来。</p><img src = "https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301142351106.jpg" ><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301151639154.jpg"                      alt="8944bf23d4d1bbf684fc5e7870f6d80"                ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301151640256.jpg"                      alt="7c27e41e89fe11bb9767a49981fb96d"                ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301151640266.jpg"                      alt="664000565d3fb82f2b9e9e94f3b54ad"                ></p><p>这是附近的基站，从小时候便有了，距今好像也有近乎十年的历史了，仍然矗立在那，配上背后的云彩，便有了一种独特，我难以描述的美感。</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301151641959.jpg"                      alt="13951cead735fa0c885b65944d0bf5e"                ><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301151641213.jpg"                      alt="66c71a862849dbdb5174848b4c1cb27"                ></p><p>这两张照片是在田地里拍摄的，当时的天空还有太阳在照着，但慢慢的，便被这片云藏了起来。站在广阔的田里，抬头便是这篇云，细看其中，有种漫威电影里的混沌的感觉，觉得颇为有趣</p>]]></content>
      
      
      
        <tags>
            
            <tag> 风景 感悟 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>勇气</title>
      <link href="/2023/01/12/%E5%8B%87%E6%B0%94/"/>
      <url>/2023/01/12/%E5%8B%87%E6%B0%94/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>​《被讨厌的勇气》 《月光落在左手上》</p><p>​今天又重拾起一本曾经读过的书，虽然读过，但只是浅浅的读了一遍，受益匪浅，但是对于现在的我来说仍然有很多未解之谜。最近这两年来，也发现自己有暴躁的倾向，内心也时常久久不能平静，便萌生了再读一遍的想法。至于第二本书，余秀华女士的诗歌，或许也能打开我的一扇新世界的大门。</p><p>​<strong>被讨厌的勇气</strong></p><blockquote><p>开篇的两句话便可见这本书对于很多人都有很大的作用</p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301122242353.png"                      width=70%                ></blockquote><p>​<strong>月光落在左手上</strong></p><blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301132325494.png"                      alt="image-20230113232505373"                ></p><p>诗的名字：我爱你，巴巴的活着，这何尝不是大部分人的写照呢，机械般的活着。把自己比喻作陈皮，在阳光下才能舒展开来，不同的茶叶便能带来心中的美好，平平淡淡的生活中，都有让自己开心的事物存在，但是诗人自身的不幸，痛苦在这个时候又将其拉回现实，这便是内心的雪。诗人表示自己并不会这么容易肝肠寸断，因为诗人把自己比作那稗子一样，长在稻谷周围，很相似，但是却并不是那稻子，只是一种极其不受欢迎的野草。诗人在庭院之中读着心爱之人的诗歌，以突然飞过的麻雀儿寓意时光的飞逝。稻子和稗子都渴望春天，但是稗子的渴望中又带着“提心吊胆”。一不小心便会失去。</p><p>就连耶稣用稗子设过比喻：“天国，好像人撒好种子在田里。有仇敌来，将稗子撒在麦子里，就走了。好种就是天国之子。稗子就是那恶者之子。撒稗子的仇敌就是魔鬼。收割的时候就是世界的末了。”<a class="link"   href="https://www.163.com/dy/article/FVDUI8A20545781Y.html" >Link<i class="fa-solid fa-up-right-from-square"></i></a></p><p>所以便有了：<strong>活为稗子，提心吊胆</strong>。</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> 被讨厌的勇气 读书 月光落在左手上 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Special page</title>
      <link href="/2023/01/11/Special-page/"/>
      <url>/2023/01/11/Special-page/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>For  Lady Shen，我最喜欢的人，当你看到这个网页，我想应该已经是比较晚的时候了，现在是2022年的11月18号，23点21分  </p><hr><p>​      <img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301112154437.jpg"                      alt="2"                ></p><blockquote><p>先草率的看一下，以后想说的话，都会在这里的<br>喜欢你，每一天<br>爱你，每一天<br>晚安  </p><h2 id="现在是19号的0-14分"><a href="#现在是19号的0-14分" class="headerlink" title="现在是19号的0:14分  "></a>现在是19号的0:14分  </h2><p>可能我真的不适合谈恋爱吧，一边说喜欢，一边表现出来却又并没有像我所说的那么喜欢。或许这才是现在的我吧。  </p></blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301112155894.jpg"                      alt="p1"                ></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301112155999.jpg"                      alt="p2"                ></p><p>-&gt;  </p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301112156959.jpg"                      alt="p3"                ></p><p>-&gt;  </p><p>   <img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301112156696.jpg"                      alt="p4"                ></p><p>-&gt;<br>   <img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301112156712.jpg"                      alt="p5"                ></p><p>-&gt;<br>   <img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301112156942.jpg"                      alt="p6"                ></p><p>-&gt;<br>   <img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301112156372.jpg"                      alt="p7"                ></p><p>-&gt;<br><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301112157171.jpg"                      alt="p8"                ><br>可能真的到结尾了吧。</p><hr><p><em>The story never ends</em><br>hahaha，并没有到结尾，因为才刚刚开始，好多事还没来得及去说，还没有牵过手，还没有一起去看过电影，去逛过公园，还没有去到以后的以后<br>所以，哪有那么容易结束呢，以前都没有想过会像现在这样有着另一个人的陪伴和关心，我越去思考，越会觉得不可思议，从相遇到现在的相恋，或许每一步都是注定的吧，是一份来自上天的礼物，奖励我单身20年的一份礼物。  </p><blockquote><p>又到了假期，现在的假期长了许多，多了一个月，但同时也多了许多未完成的考试，有好的方面也有坏的方面，但是又如何呢，人嘛，还是要懂得趋利避害的，对事情分析要冷静<br>需要明白自己做的事是为了什么，有“<strong>勇气</strong>”去进行下一步的动作，这里的勇气二字，主要来源于《被讨厌的勇气》，我拜读过一遍，当时如饥似渴的读，只懂了很浅的表面，现在也该开启新的篇章了<br>再去读一遍，把书读薄，也该把《撒哈拉的故事》读一遍，体会到荷西与三毛的那份感情，三毛对于生活的态度。尝试让自己丰富起来  </p></blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301112157037.jpg"                      alt="purple_cloud"                ></p><blockquote><h2 id="“总有一阵风会吹过我再吹过你，总有一个瞬间我们之间的距离是零”-————————我们需要的"><a href="#“总有一阵风会吹过我再吹过你，总有一个瞬间我们之间的距离是零”-————————我们需要的" class="headerlink" title="“总有一阵风会吹过我再吹过你，总有一个瞬间我们之间的距离是零”　　　　　————————我们需要的"></a>“<strong>总有一阵风会吹过我再吹过你，总有一个瞬间我们之间的距离是零</strong>”　　　　　————————我们需要的</h2><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301112157695.jpg"                      alt="2022_12_11_1"                ><br>“<strong>眼睛为她下着雨，心里却为她打着伞，这就是爱情</strong>” 　　　　　　　————————　泰戈尔</p></blockquote><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301112157984.jpg"                      alt="2022_12_11_2"                ><br>“其实最棒的回忆就在当下，在眼前，而且这会是人生最美好的时光”　　　　　　————————偷影子的人　　<br> <img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301112157355.jpg"                      alt="2022_12_11_4"                ></p><p>最近这几天觉得真的好开心呀，真的到了一个新的阶段，相互关心，相互需要，相互依偎，更应该珍惜现在的美好事物，不过最近也有点情绪波动就是说，玩游戏玩得多容易被干扰，关键的还是我的心灵好像逐渐贫瘠了，变得干涸起来了，没有书的涵养，腹有诗书气自华是真实存在的，多读书，改变自己的想法，也尝试去做的更好。（2022-12-11 23:19）<br> <img                       lazyload                     src="/images/loading.svg"                     data-src="https://cdn.jsdelivr.net/gh/h-yy-bag/hexo_imgs/202301112158415.jpg"                      alt="2022_12_11_3"                ></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>test</title>
      <link href="/2023/01/05/test/"/>
      <url>/2023/01/05/test/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>hello, my beloved lady.小申</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>test_my_site</title>
      <link href="/2023/01/05/test-my-site/"/>
      <url>/2023/01/05/test-my-site/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
